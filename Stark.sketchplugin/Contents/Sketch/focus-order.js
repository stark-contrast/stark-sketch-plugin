var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=36)}([function(e,t){e.exports=require("sketch/settings")},function(e,t){e.exports=require("sketch")},function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),r(n(29),t),r(n(12),t),r(n(15),t),r(n(30),t),r(n(31),t),r(n(32),t),r(n(13),t),r(n(6),t),r(n(33),t),r(n(14),t),r(n(34),t)},function(e,t){e.exports=require("sketch/dom")},function(e,t,n){var i,r,o=[];n(10)()?(o=[],i=function(e,t,n,i,r,a,s,c,u,l,d,f){var h=o.length;return o.push(coscript.scheduleWithInterval_jsFunction((t||0)/1e3,(function(){e(n,i,r,a,s,c,u,l,d,f)}))),h},r=function(e){var t=o[e];t&&(t.cancel(),o[e]=void 0)}):(i=function(e,t,n,i,a,s,c,u,l,d,f,h){coscript.shouldKeepAround=!0;var p=o.length;return o.push(!0),coscript.scheduleWithInterval_jsFunction((t||0)/1e3,(function(){o[p]&&e(n,i,a,s,c,u,l,d,f,h),r(p),o.every((function(e){return!e}))&&(coscript.shouldKeepAround=!1)})),p},r=function(e){o[e]=!1}),e.exports={setTimeout:i,clearTimeout:r}},function(e,t){e.exports={JS_BRIDGE:"__skpm_sketchBridge",JS_BRIDGE_RESULT_SUCCESS:"__skpm_sketchBridge_success",JS_BRIDGE_RESULT_ERROR:"__skpm_sketchBridge_error",START_MOVING_WINDOW:"__skpm_startMovingWindow",EXECUTE_JAVASCRIPT:"__skpm_executeJS",EXECUTE_JAVASCRIPT_SUCCESS:"__skpm_executeJS_success_",EXECUTE_JAVASCRIPT_ERROR:"__skpm_executeJS_error_"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertRgbaToHex=t.ConvertRgbaToBaseHsla=t.ConvertRgbaToHsla=t.ConvertRgbaToBaseRgba=t.ConvertBaseRgbaToRgba=t.ConvertRgbaStringToBaseRgba=t.ConvertRgbaStringToRgba=t.ConvertBaseRgbaToRgbaString=t.ConvertRgbaToRgbaString=void 0;var i=n(14);t.ConvertRgbaToRgbaString=function(e){return"rgba("+e.r+", "+e.g+", "+e.b+", "+(e.a?e.a:1)+")"},t.ConvertBaseRgbaToRgbaString=function(e){return"rgba("+Math.round(255*e.r)+", "+Math.round(255*e.g)+", "+Math.round(255*e.b)+", "+(e.a?e.a:1)+")"},t.ConvertRgbaStringToRgba=function(e){var t=i.RGBA_REGEX,n=e.match(t);return n&&(null==n?void 0:n.length)>0?{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:Number(n[4])}:{r:0,g:0,b:0,a:0}},t.ConvertRgbaStringToBaseRgba=function(e){var t=i.RGBA_REGEX,n=e.match(t);return n&&(null==n?void 0:n.length)>0?{r:Number(n[1])/255,g:Number(n[2])/255,b:Number(n[3])/255,a:Number(n[4])}:{r:0,g:0,b:0,a:0}},t.ConvertBaseRgbaToRgba=function(e,t){var n=e.a?e.a:1;return{r:255*e.r,g:255*e.g,b:255*e.b,a:t?255*n:n}},t.ConvertRgbaToBaseRgba=function(e,t){var n=e.a?e.a:255;return{r:e.r/255,g:e.g/255,b:e.b/255,a:t?n/255:n}},t.ConvertRgbaToHsla=function(e){var t,n=e.r/255,i=e.g/255,r=e.b/255,o=Math.max(n,i,r),a=Math.min(n,i,r),s=0,c=(o+a)/2;if(o===a)s=t=0;else{var u=o-a;switch(t=c>.5?u/(2-o-a):u/(o+a),o){case n:s=(i-r)/u+(i<r?6:0);break;case i:s=(r-n)/u+2;break;case r:s=(n-i)/u+4}s/=6}return{h:Math.round(360*s),s:Math.round(100*t),l:Math.round(100*c),a:e.a}},t.ConvertRgbaToBaseHsla=function(e){var t,n=e.r/255,i=e.g/255,r=e.b/255,o=Math.max(n,i,r),a=Math.min(n,i,r),s=0,c=(o+a)/2;if(o===a)s=t=0;else{var u=o-a;switch(t=c>.5?u/(2-o-a):u/(o+a),o){case n:s=(i-r)/u+(i<r?6:0);break;case i:s=(r-n)/u+2;break;case r:s=(n-i)/u+4}s/=6}return{h:s,s:t,l:c,a:e.a}},t.ConvertRgbaToHex=function(e,t,n){var i=function(e){return 1===e.length?"0"+e:""+e};return(t?"#":"")+i(Math.round(e.r).toString(16))+i(Math.round(e.g).toString(16))+i(Math.round(e.b).toString(16))+(n&&e.a?i(Math.round(255*e.a).toString(16)):"")}},function(e,t){e.exports=require("events")},function(e,t,n){(function(t){var i=n(5);e.exports=function(n,r){return function o(a,s,c){"function"==typeof s&&(c=s,s=!1);var u=coscript.createFiber();return n.navigationDelegate().state&&0==n.navigationDelegate().state.wasReady?new t((function(e,t){r.once("ready-to-show",(function(){o(a,s,c).then(e).catch(t),u.cleanup()}))})):new t((function(t,o){var s=Math.random();r.webContents.on(i.EXECUTE_JAVASCRIPT_SUCCESS+s,(function(e){try{c&&c(null,e),t(e)}catch(e){o(e)}u.cleanup()})),r.webContents.on(i.EXECUTE_JAVASCRIPT_ERROR+s,(function(e){try{c?(c(e),t()):o(e)}catch(e){o(e)}u.cleanup()})),n.evaluateJavaScript_completionHandler(e.exports.wrapScript(a,s),null)}))}},e.exports.wrapScript=function(e,t){return"window."+i.EXECUTE_JAVASCRIPT+"("+t+", "+JSON.stringify(e)+")"},e.exports.injectScript=function(e){var t="window."+i.EXECUTE_JAVASCRIPT+' = function(id, script) {  try {    var res = eval(script);    if (res && typeof res.then === "function" && typeof res.catch === "function") {      res.then(function (res2) {        window.postMessage("'+i.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res2);      })      .catch(function (err) {        window.postMessage("'+i.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);      })    } else {      window.postMessage("'+i.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res);    }  } catch (err) {    window.postMessage("'+i.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);  }}',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}}).call(this,n(9))},function(e,t,n){"use strict";(function(t,n){var i=t;function r(e){return Boolean(e&&void 0!==e.length)}function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void u(t.promise,e)}c(t.promise,i)}else(1===e._state?c:u)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void d(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn((function(){e._handled||a._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(e){if(n)return;n=!0,u(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},a.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},a.all=function(e){return new a((function(t,n){if(!r(e))return n(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function a(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,(function(t){a(e,t)}),n)}i[e]=r,0==--o&&t(i)}catch(e){n(e)}}for(var s=0;s<i.length;s++)a(s,i[s])}))},a.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var r=i.length;function o(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(t){o(e,t)}),(function(n){i[e]={status:"rejected",reason:n},0==--r&&t(i)}))}i[e]={status:"fulfilled",value:n},0==--r&&t(i)}for(var a=0;a<i.length;a++)o(a,i[a])}))},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a((function(t){t(e)}))},a.reject=function(e){return new a((function(t,n){n(e)}))},a.race=function(e){return new a((function(t,n){if(!r(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)a.resolve(e[i]).then(t,n)}))},a._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){i(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=a}).call(this,n(4).setTimeout,n(20).setImmediate)},function(e,t){e.exports=function(){return"undefined"!=typeof coscript&&coscript.createFiber}},function(e,t,n){var i,r,o=[];n(10)()?(i=function(e,t,n,i,r,a,s,c,u,l,d,f){var h=o.length;return o.push(coscript.scheduleWithRepeatingInterval_jsFunction((t||0)/1e3,(function(){e(n,i,r,a,s,c,u,l,d,f)}))),h},r=function(e){var t=o[e];t&&(t.cancel(),o[e]=void 0)}):(i=function(e,t,n,i,r,a,s,c,u,l,d,f){coscript.shouldKeepAround=!0;var h=o.length;return o.push(!0),function p(){coscript.scheduleWithInterval_jsFunction((t||0)/1e3,(function(){o[h]&&(e(n,i,r,a,s,c,u,l,d,f),p())}))}(),h},r=function(e){o[e]=!1,o.every((function(e){return!e}))&&(coscript.shouldKeepAround=!1)}),e.exports={setInterval:i,clearInterval:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightenColor=t.DarkenColor=void 0;var i=n(13),r=n(6);t.DarkenColor=function(e,t){var n=r.ConvertRgbaToBaseHsla(e);return n.l-=t,n.l<0&&(n.l=0),i.ConvertBaseHslaToRgba(n)},t.LightenColor=function(e,t){var n=r.ConvertRgbaToBaseHsla(e);return n.l+=t,n.l>1&&(n.l=1),i.ConvertBaseHslaToRgba(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertBaseHslaToRgba=void 0,t.ConvertBaseHslaToRgba=function(e){var t,n,i,r=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e};if(0===e.s)t=n=i=e.l;else{var o=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,a=2*e.l-o;t=r(a,o,e.h+1/3),n=r(a,o,e.h),i=r(a,o,e.h-1/3)}return{r:Math.round(255*t),g:Math.round(255*n),b:Math.round(255*i),a:e.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CB_ACHROLY=t.CB_ACHRO=t.CB_TRITALY=t.CB_TRITA=t.CB_DEUTERLY=t.CB_DEUTER=t.CB_PROTALY=t.CB_PROTA=t.RGBA_REGEX=void 0,t.RGBA_REGEX=/rgba?\((\d+.?\d+|\d),\s*(\d+.?\d+|\d),\s*(\d+.?\d+|\d),\s*(\d+.?\d+|\d)?\)/,t.CB_PROTA="Protanopia",t.CB_PROTALY="Protanomaly",t.CB_DEUTER="Deuteranopia",t.CB_DEUTERLY="Deuteranomaly",t.CB_TRITA="Tritanopia",t.CB_TRITALY="Tritanomaly",t.CB_ACHRO="Achromatopsia",t.CB_ACHROLY="Achromatomaly"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetContrastRatio=void 0,t.GetContrastRatio=function(e,t,n){var i=function(e){var t,n,i;return t=e.r/255,n=e.g/255,i=e.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))},r=(Math.max(i(e),i(t))+.05)/(Math.min(i(e),i(t))+.05);if(n){var o=String(r);if(-1!==o.indexOf(".")){var a=o.split(".");r=1===a.length?Number(o):Number(a[0]+"."+a[1].charAt(0)+a[1].charAt(1))}r=Number(r.toFixed(2))}return r}},function(e,t,n){var i=n(7),r=n(18),o=n(19),a=n(21),s=n(22),c=n(23),u=n(24),l=n(8),d=n(25);function f(e){var t=(e=e||{}).identifier||NSUUID.UUID().UUIDString(),n=NSThread.mainThread().threadDictionary(),h=f.fromId(t);if(h)return h;var p=new i;if(p.id=t,e.modal&&!e.parent)throw new Error("A modal needs to have a parent.");var m=coscript.createFiber(),g=e.width||800,v=e.height||600,S=NSScreen.screens().firstObject().frame(),y=NSMakeRect(void 0!==e.x?e.x:Math.round((NSWidth(S)-g)/2),void 0!==e.y?NSHeight(S)-e.y:Math.round((NSHeight(S)-v)/2),g,v);e.titleBarStyle&&"default"!==e.titleBarStyle&&(e.frame=!1);var w="textured"!==e.windowType,b=NSTitledWindowMask;!1!==e.minimizable&&(b|=NSMiniaturizableWindowMask),!1!==e.closable&&(b|=NSClosableWindowMask),!1!==e.resizable&&(b|=NSResizableWindowMask),w&&!e.transparent&&!1!==e.frame||(b|=NSTexturedBackgroundWindowMask);var _=NSPanel.alloc().initWithContentRect_styleMask_backing_defer(y,b,NSBackingStoreBuffered,!0),C=WKWebViewConfiguration.alloc().init(),N=WKWebView.alloc().initWithFrame_configuration(CGRectMake(0,0,e.width||800,e.height||600),C);if(c(N),N.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),r(p,_,N),o(p,_,N),d(p,_,N,e),"desktop"===e.windowType&&(_.setLevel(kCGDesktopWindowLevel-1),_.setCollectionBehavior(NSWindowCollectionBehaviorCanJoinAllSpaces|NSWindowCollectionBehaviorStationary|NSWindowCollectionBehaviorIgnoresCycle)),void 0===e.minWidth&&void 0===e.minHeight||p.setMinimumSize(e.minWidth||0,e.minHeight||0),void 0===e.maxWidth&&void 0===e.maxHeight||p.setMaximumSize(e.maxWidth||1e4,e.maxHeight||1e4),e.transparent||!1===e.frame){_.titlebarAppearsTransparent=!0,_.titleVisibility=NSWindowTitleHidden,_.setOpaque(0),_.isMovableByWindowBackground=!0;var R=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");R.setShowsBaselineSeparator(!1),_.setToolbar(R)}if("hiddenInset"===e.titleBarStyle){var M=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");M.setShowsBaselineSeparator(!1),_.setToolbar(M)}!1!==e.frame&&e.useContentSize||p.setSize(g,v),e.center&&p.center(),e.alwaysOnTop&&p.setAlwaysOnTop(!0),e.fullscreen&&p.setFullScreen(!0),p.setFullScreenable(!!e.fullscreenable);let k=e.title;!1===e.frame?k=void 0:void 0===k&&"undefined"!=typeof __command&&__command.pluginBundle()&&(k=__command.pluginBundle().name()),k&&p.setTitle(k);var x=e.backgroundColor;e.transparent&&(x=NSColor.clearColor()),!x&&!1===e.frame&&e.vibrancy&&(x=NSColor.clearColor()),p._setBackgroundColor(x||NSColor.windowBackgroundColor()),!1===e.hasShadow&&p.setHasShadow(!1),void 0!==e.opacity&&p.setOpacity(e.opacity),e.webPreferences=e.webPreferences||{},N.configuration().preferences().setValue_forKey(!1!==e.webPreferences.devTools,"developerExtrasEnabled"),N.configuration().preferences().setValue_forKey(!1!==e.webPreferences.javascript,"javaScriptEnabled"),N.configuration().preferences().setValue_forKey(!!e.webPreferences.plugins,"plugInsEnabled"),N.configuration().preferences().setValue_forKey(e.webPreferences.minimumFontSize||0,"minimumFontSize"),e.webPreferences.zoomFactor&&N.setMagnification(e.webPreferences.zoomFactor);var T=_.contentView();return!1!==e.frame?(N.setFrame(T.bounds()),T.addSubview(N)):(T.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),a(T,T.superview()),N.setFrame(T.bounds()),T.addSubview(N),_.standardWindowButton(NSWindowFullScreenButton)&&_.standardWindowButton(NSWindowFullScreenButton).setHidden(!0),e.titleBarStyle&&"default"!==e.titleBarStyle||(_.standardWindowButton(NSWindowZoomButton).setHidden(!0),_.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),_.standardWindowButton(NSWindowCloseButton).setHidden(!0),_.standardWindowButton(NSWindowZoomButton).setEnabled(!1))),e.vibrancy&&p.setVibrancy(e.vibrancy),p.setMaximizable(!1!==e.maximizable),_.setHidesOnDeactivate(!1!==e.hidesOnDeactivate),e.remembersWindowFrame&&(_.setFrameAutosaveName(t),_.setFrameUsingName_force(_.frameAutosaveName(),!1)),e.acceptsFirstMouse&&p.on("focus",(function(e){e.type()===NSEventTypeLeftMouseDown&&p.webContents.executeJavaScript(s(N,e)).catch(()=>{})})),l.injectScript(N),u.injectScript(N),u.setupHandler(p),!1!==e.show&&p.show(),p.on("closed",(function(){p._destroyed=!0,n.removeObjectForKey(t);var e=n[t+".themeObserver"];e&&(NSApplication.sharedApplication().removeObserver_forKeyPath(e,"effectiveAppearance"),n.removeObjectForKey(t+".themeObserver")),m.cleanup()})),n[t]=_,m.onCleanup((function(){p._destroyed||p.destroy()})),p}f.fromId=function(e){var t=NSThread.mainThread().threadDictionary();if(t[e])return f.fromPanel(t[e],e)},f.fromPanel=function(e,t){var n=new i;if(n.id=t,!e||!e.contentView)throw new Error("needs to pass an NSPanel");for(var a=null,s=e.contentView().subviews(),c=0;c<s.length;c+=1)a||s[c].isKindOfClass(WKInspectorWKWebView)||!s[c].isKindOfClass(WKWebView)||(a=s[c]);if(!a)throw new Error("The panel needs to have a webview");return r(n,e,a),o(n,e,a),n},e.exports=f},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=function(e,t,n){function i(n){e.isVisible()&&(n?(NSApplication.sharedApplication().activateIgnoringOtherApps(!0),t.makeKeyAndOrderFront(null)):(t.orderBack(null),NSApp.mainWindow().makeKeyAndOrderFront(null)))}e._panel=t,e._webview=n,e._destroyed=!1,e.destroy=function(){return t.close()},e.close=function(){if(t.delegate().utils&&t.delegate().utils.parentWindow){var n=!0;return e.emit("close",{get defaultPrevented(){return!n},preventDefault:function(){n=!1}}),void(n&&t.delegate().utils.parentWindow.endSheet(t))}e.isClosable()&&t.performClose(null)},e.focus=i.bind(this,!0),e.blur=i.bind(this,!1),e.isFocused=function(){return t.isKeyWindow()},e.isDestroyed=function(){return e._destroyed},e.show=function(){return NSApp.activateIgnoringOtherApps(!0),t.delegate().utils&&t.delegate().utils.parentWindow?t.delegate().utils.parentWindow.beginSheet_completionHandler(t,__mocha__.createBlock_function("v16@?0q8",(function(){e.emit("closed")}))):t.makeKeyAndOrderFront(null)},e.showInactive=function(){return t.orderFrontRegardless()},e.hide=function(){return t.orderOut(null)},e.isVisible=function(){return t.isVisible()},e.isModal=function(){return!1},e.maximize=function(){e.isMaximized()||t.zoom(null)},e.unmaximize=function(){e.isMaximized()&&t.zoom(null)},e.isMaximized=function(){if(0!=(t.styleMask()&NSResizableWindowMask))return t.isZoomed();var e=NSScreen.mainScreen().visibleFrame(),n=t.frame();return e.origin.x==n.origin.x&&e.origin.y==n.origin.y&&e.size.width==n.size.width&&e.size.height==n.size.height},e.minimize=function(){return t.miniaturize(null)},e.restore=function(){return t.deminiaturize(null)},e.isMinimized=function(){return t.isMiniaturized()},e.setFullScreen=function(n){n!==e.isFullscreen()&&t.toggleFullScreen(null)},e.isFullscreen=function(){return t.styleMask()&NSFullScreenWindowMask},e.setAspectRatio=function(e){e>0?t.setAspectRatio(NSMakeSize(e,1)):t.setResizeIncrements(NSMakeSize(1,1))},e.setBounds=function(n,i){if(!n)return;if(e.isFullscreen())return;const r=Object.assign(e.getBounds(),n);var o=NSMakeRect(r.x,0,r.width,r.height),a=NSScreen.screens().firstObject();o.origin.y=NSHeight(a.frame())-r.y,t.setFrame_display_animate(o,!0,i)},e.getBounds=function(){const e=t.frame();var n=NSScreen.screens().firstObject().frame();return{x:e.origin.x,y:Math.round(NSHeight(n)-e.origin.y),width:e.size.width,height:e.size.height}},e.setContentBounds=function(t,n){e.setBounds(t,n)},e.getContentBounds=function(){return e.getBounds()},e.setSize=function(t,n,i){return e.setBounds({width:t,height:n},i)},e.getSize=function(){var t=e.getBounds();return[t.width,t.height]},e.setContentSize=function(t,n,i){return e.setContentBounds({width:t,height:n},i)},e.getContentSize=function(){var t=e.getContentBounds();return[t.width,t.height]},e.setMinimumSize=function(e,n){const i=CGSizeMake(e,n);t.setContentMinSize(i)},e.getMinimumSize=function(){const e=t.contentMinSize();return[e.width,e.height]},e.setMaximumSize=function(e,n){const i=CGSizeMake(e,n);t.setContentMaxSize(i)},e.getMaximumSize=function(){const e=t.contentMaxSize();return[e.width,e.height]},e.setResizable=function(t){return e._setStyleMask(t,NSResizableWindowMask)},e.isResizable=function(){return t.styleMask()&NSResizableWindowMask},e.setMovable=function(e){return t.setMovable(e)},e.isMovable=function(){return t.isMovable()},e.setMinimizable=function(t){return e._setStyleMask(t,NSMiniaturizableWindowMask)},e.isMinimizable=function(){return t.styleMask()&NSMiniaturizableWindowMask},e.setMaximizable=function(e){t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).setEnabled(e)},e.isMaximizable=function(){return t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).isEnabled()},e.setFullScreenable=function(t){e._setCollectionBehavior(t,NSWindowCollectionBehaviorFullScreenPrimary),e._setCollectionBehavior(!t,NSWindowCollectionBehaviorFullScreenAuxiliary)},e.isFullScreenable=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorFullScreenPrimary},e.setClosable=function(t){e._setStyleMask(t,NSClosableWindowMask)},e.isClosable=function(){return t.styleMask()&NSClosableWindowMask},e.setAlwaysOnTop=function(e,n,i){var r=NSNormalWindowLevel,o=CGWindowLevelForKey(kCGMaximumWindowLevelKey),a=CGWindowLevelForKey(kCGMinimumWindowLevelKey);e&&(r="normal"===n?NSNormalWindowLevel:"torn-off-menu"===n?NSTornOffMenuWindowLevel:"modal-panel"===n?NSModalPanelWindowLevel:"main-menu"===n?NSMainMenuWindowLevel:"status"===n?NSStatusWindowLevel:"pop-up-menu"===n?NSPopUpMenuWindowLevel:"screen-saver"===n?NSScreenSaverWindowLevel:"dock"===n?NSDockWindowLevel:NSFloatingWindowLevel);var s=r+(i||0);if(!(s>=a&&s<=o))throw new Error("relativeLevel must be between "+a+" and "+o);t.setLevel(s)},e.isAlwaysOnTop=function(){return t.level()!==NSNormalWindowLevel},e.moveTop=function(){return t.orderFrontRegardless()},e.center=function(){t.center()},e.setPosition=function(t,n,i){return e.setBounds({x:t,y:n},i)},e.getPosition=function(){var t=e.getBounds();return[t.x,t.y]},e.setTitle=function(e){t.setTitle(e)},e.getTitle=function(){return String(t.title())};var r=0;e.flashFrame=function(e){e?r=NSApp.requestUserAttention(NSInformationalRequest):(NSApp.cancelUserAttentionRequest(r),r=0)},e.getNativeWindowHandle=function(){return t},e.getNativeWebViewHandle=function(){return n},e.loadURL=function(e){if(/^(?!https?|file).*\.html?$/.test(e)&&"undefined"!=typeof __command&&__command.pluginBundle()&&(e="file://"+__command.pluginBundle().urlForResourceNamed(e).path()),/^file:\/\/.*\.html?$/.test(e))return e=(e=NSString.alloc().initWithString(e)).stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()),void n.loadFileURL_allowingReadAccessToURL(NSURL.URLWithString(e),NSURL.URLWithString("file:///"));const t=NSURL.URLWithString(e),i=NSURLRequest.requestWithURL(t);n.loadRequest(i)},e.reload=function(){n.reload()},e.setHasShadow=function(e){return t.setHasShadow(e)},e.hasShadow=function(){return t.hasShadow()},e.setOpacity=function(e){return t.setAlphaValue(e)},e.getOpacity=function(){return t.alphaValue()},e.setVisibleOnAllWorkspaces=function(t){return e._setCollectionBehavior(t,NSWindowCollectionBehaviorCanJoinAllSpaces)},e.isVisibleOnAllWorkspaces=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorCanJoinAllSpaces},e.setIgnoreMouseEvents=function(e){return t.setIgnoresMouseEvents(e)},e.setContentProtection=function(e){t.setSharingType(e?NSWindowSharingNone:NSWindowSharingReadOnly)},e.setAutoHideCursor=function(e){t.setDisableAutoHideCursor(e)},e.setVibrancy=function(n){var i=e._vibrantView;if(!n){if(null==i)return;return i.removeFromSuperview(),void t.setVibrantView(null)}if(null==i){var r=t.contentView();i=NSVisualEffectView.alloc().initWithFrame(r.bounds()),e._vibrantView=i,i.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),i.setBlendingMode(NSVisualEffectBlendingModeBehindWindow),i.setState(NSVisualEffectStateActive),i.setFrame(r.bounds()),r.addSubview_positioned_relativeTo(i,NSWindowBelow,null)}var o=NSVisualEffectMaterialLight;"appearance-based"===n?o=NSVisualEffectMaterialAppearanceBased:"light"===n?o=NSVisualEffectMaterialLight:"dark"===n?o=NSVisualEffectMaterialDark:"titlebar"===n?o=NSVisualEffectMaterialTitlebar:"selection"===n?o=NSVisualEffectMaterialSelection:"menu"===n?o=NSVisualEffectMaterialMenu:"popover"===n?o=NSVisualEffectMaterialPopover:"sidebar"===n?o=NSVisualEffectMaterialSidebar:"medium-light"===n?o=NSVisualEffectMaterialMediumLight:"ultra-dark"===n&&(o=NSVisualEffectMaterialUltraDark),i.setMaterial(o)},e._setBackgroundColor=function(e){var i=function(e){if(!e||"#"!==e[0]){if(e&&"function"==typeof e.isKindOfClass&&e.isKindOfClass(NSColor))return e;throw new Error("Incorrect color formating. It should be an hex color: #RRGGBBAA")}var t,n=e.substr(1);if(3===n.length?n+="F":6===n.length&&(n+="FF"),4===n.length)for(var i=0;i<4;i+=1)t+=n[i],t+=n[i];else{if(8!==n.length)return NSColor.whiteColor();t=n}var r=parseInt(t.slice(0,2),16)/255,o=parseInt(t.slice(2,4),16)/255,a=parseInt(t.slice(4,6),16)/255,s=parseInt(t.slice(6,8),16)/255;return NSColor.colorWithSRGBRed_green_blue_alpha(r,o,a,s)}(e);n.setValue_forKey(!1,"drawsBackground"),t.backgroundColor=i},e._invalidate=function(){t.flushWindow(),t.contentView().setNeedsDisplay(!0)},e._setStyleMask=function(n,i){var r=e.isMaximizable();n?t.setStyleMask(t.styleMask()|i):t.setStyleMask(t.styleMask()&~i),e.setMaximizable(r)},e._setCollectionBehavior=function(n,i){var r=e.isMaximizable();n?t.setCollectionBehavior(t.collectionBehavior()|i):t.setCollectionBehavior(t.collectionBehavior()&~i),e.setMaximizable(r)},e._showWindowButton=function(e){var n=t.standardWindowButton(e);n.superview().addSubview_positioned_relative(n,NSWindowAbove,null)}}},function(e,t,n){var i=n(7),r=n(8);e.exports=function(e,t,n){var o=new i;o.loadURL=e.loadURL,o.loadFile=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.downloadURL=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.getURL=function(){return String(n.URL())},o.getTitle=function(){return String(n.title())},o.isDestroyed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.focus=e.focus,o.isFocused=e.isFocused,o.isLoading=function(){return!!n.loading()},o.isLoadingMainFrame=function(){return!!n.loading()},o.isWaitingForResponse=function(){return!n.loading()},o.stop=function(){n.stopLoading()},o.reload=function(){n.reload()},o.reloadIgnoringCache=function(){n.reloadFromOrigin()},o.canGoBack=function(){return!!n.canGoBack()},o.canGoForward=function(){return!!n.canGoForward()},o.canGoToOffset=function(e){return!!n.backForwardList().itemAtIndex(e)},o.clearHistory=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.goBack=function(){n.goBack()},o.goForward=function(){n.goForward()},o.goToIndex=function(e){var t=n.backForwardList(),i=t.backList(),r=i.count();if(r>e)n.loadRequest(NSURLRequest.requestWithURL(i[e]));else{var o=t.forwardList();if(!(o.count()>e-r))throw new Error("Cannot go to index "+e);n.loadRequest(NSURLRequest.requestWithURL(o[e-r]))}},o.goToOffset=function(e){if(!o.canGoToOffset(e))throw new Error("Cannot go to offset "+e);n.loadRequest(NSURLRequest.requestWithURL(n.backForwardList().itemAtIndex(e)))},o.isCrashed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setUserAgent=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.getUserAgent=function(){const e=n.customUserAgent();return e?String(e):void 0},o.insertCSS=function(e){var t="var style = document.createElement('style'); style.innerHTML = "+e.replace(/"/,'\\"')+"; document.head.appendChild(style);",i=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);n.configuration().userContentController().addUserScript(i)},o.insertJS=function(e){var t=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(e,0,!0);n.configuration().userContentController().addUserScript(t)},o.executeJavaScript=r(n,e),o.setIgnoreMenuShortcuts=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.isAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setZoomFactor=function(e){n.setMagnification_centeredAtPoint(e,CGPointMake(0,0))},o.getZoomFactor=function(e){e(Number(n.magnification()))},o.setZoomLevel=function(e){o.setZoomFactor(Math.pow(1.2,e))},o.getZoomLevel=function(e){e(Math.log(Number(n.magnification()))/Math.log(1.2))},o.setVisualZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setLayoutZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.send=function(){const e="window.postMessage({isSketchMessage: true,origin: '"+String(__command.identifier())+"',args: "+JSON.stringify([].slice.call(arguments))+'}, "*")';n.evaluateJavaScript_completionHandler(e,null)},o.getNativeWebview=function(){return n},e.webContents=o}},function(e,t,n){var i=n(4);e.exports={setImmediate:function(e,t,n,r,o,a,s,c,u,l,d){return i.setTimeout(e,0,t,n,r,o,a,s,c,u,l,d)},clearImmediate:function(e){return i.clearTimeout(e)}}},function(e,t){function n(e,t,n,i){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(t,e,NSLayoutRelationEqual,n,e,1,i))}e.exports=function(e,t,i){i=i||[],e.setTranslatesAutoresizingMaskIntoConstraints(!1),n(NSLayoutAttributeLeft,e,t,i[0]||0),n(NSLayoutAttributeTop,e,t,i[1]||0),n(NSLayoutAttributeRight,e,t,i[2]||0),n(NSLayoutAttributeBottom,e,t,i[3]||0)}},function(e,t){e.exports=function(e,t){var n=e.convertPoint_fromView(t.locationInWindow(),null);return"var el = document.elementFromPoint("+n.x+", "+n.y+'); if (el && el.tagName === "SELECT") {  var event = document.createEvent("MouseEvents");  event.initMouseEvent("mousedown", true, true, window);  el.dispatchEvent(event);} else if (el && ["text", "textarea", "date", "datetime-local", "email", "number", "month", "password", "search", "tel", "time", "url", "week" ].indexOf(el.type) >= 0 && el.focus) {el.focus();} else if (el) {el.dispatchEvent(new Event("click", {bubbles: true}))}'}},function(e,t,n){var i=n(5);e.exports=function(e){var t='window.originalPostMessage = window.postMessage;window.postMessage = function(actionName) {  if (!actionName) {    throw new Error(\'missing action name\')  }  var id = String(Math.random()).replace(".", "");    var args = [].slice.call(arguments);    args.unshift(id);  return new Promise(function (resolve, reject) {    window["'+i.JS_BRIDGE_RESULT_SUCCESS+'" + id] = resolve;    window["'+i.JS_BRIDGE_RESULT_ERROR+'" + id] = reject;    window.webkit.messageHandlers.'+i.JS_BRIDGE+".postMessage(JSON.stringify(args));  });}",n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}},function(e,t,n){(function(t,i){var r=n(5);e.exports.injectScript=function(e){var t='(function () {document.addEventListener(\'mousedown\', onMouseDown);function shouldDrag(target) {  if (!target || (target.dataset || {}).appRegion === "no-drag") { return false }  if ((target.dataset || {}).appRegion === "drag") { return true }  return shouldDrag(target.parentElement)};function onMouseDown(e) {  if (e.button !== 0 || !shouldDrag(e.target)) { return }  window.postMessage("'+r.START_MOVING_WINDOW+'");};})()',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)},e.exports.setupHandler=function(e){var n=null,o=null,a=null;function s(){if(!o||1!==NSEvent.pressedMouseButtons())return t(a),n=null,void(o=null);var i=NSEvent.mouseLocation();e.setPosition(o.x+(i.x-n.x),o.y+(n.y-i.y),!1)}e.webContents.on(r.START_MOVING_WINDOW,(function(){n=NSEvent.mouseLocation();var t=e.getPosition();o={x:t[0],y:t[1]},a=i(s,1e3/60)}))}}).call(this,n(11).clearInterval,n(11).setInterval)},function(e,t,n){(function(t,i){var r,o,a,s,c=n(27),u=n(28),l=n(5);e.exports=function(e,n,d,f){s||(s=new c({utils:null,"observeValueForKeyPath:ofObject:change:context:":function(e,t,n){const i=n[NSKeyValueChangeNewKey],r="NSAppearanceNameDarkAqua"===String(i.bestMatchFromAppearancesWithNames(["NSAppearanceNameAqua","NSAppearanceNameDarkAqua"]));this.utils.executeJavaScript("document.body.classList.remove('__skpm-"+(r?"light":"dark")+"'); document.body.classList.add('__skpm-"+(r?"dark":"light")+"')")}})),r||(r=new c({utils:null,panel:null,"windowDidResize:":function(){this.utils.emit("resize")},"windowDidMiniaturize:":function(){this.utils.emit("minimize")},"windowDidDeminiaturize:":function(){this.utils.emit("restore")},"windowDidEnterFullScreen:":function(){this.utils.emit("enter-full-screen")},"windowDidExitFullScreen:":function(){this.utils.emit("leave-full-screen")},"windowDidMove:":function(){this.utils.emit("move"),this.utils.emit("moved")},"windowShouldClose:":function(){var e=1;return this.utils.emit("close",{get defaultPrevented(){return!e},preventDefault:function(){e=0}}),e},"windowWillClose:":function(){this.utils.emit("closed")},"windowDidBecomeKey:":function(){this.utils.emit("focus",this.panel.currentEvent())},"windowDidResignKey:":function(){this.utils.emit("blur")}})),o||(o=new c({state:{wasReady:0},utils:null,"webView:didCommitNavigation:":function(e){this.utils.emit("will-navigate",{},String(String(e.URL())))},"webView:didStartProvisionalNavigation:":function(){this.utils.emit("did-start-navigation"),this.utils.emit("did-start-loading")},"webView:didReceiveServerRedirectForProvisionalNavigation:":function(){this.utils.emit("did-get-redirect-request")},"webView:didFailProvisionalNavigation:withError:":function(e,t,n){this.utils.emit("did-fail-load",n)},"webView:didFinishNavigation:":function(){0==this.state.wasReady&&(this.state.wasReady=1,this.utils.emitBrowserEvent("ready-to-show")),this.utils.emit("did-navigate"),this.utils.emit("did-frame-navigate"),this.utils.emit("did-stop-loading"),this.utils.emit("did-finish-load"),this.utils.emit("did-frame-finish-load")},"webViewWebContentProcessDidTerminate:":function(){this.utils.emit("dom-ready")}})),a||(a=new c({utils:null,"userContentController:didReceiveScriptMessage:":function(e,t){var n=this.utils.parseWebArguments(String(t.body()));n&&n[0]&&"string"==typeof n[0]&&(n[0]=String(n[0]),this.utils.emit.apply(this,n))}}));var h=s.new({utils:{executeJavaScript(e){d.evaluateJavaScript_completionHandler(e,null)}}}),p=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly("document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('__skpm-"+("undefined"!=typeof MSTheme&&MSTheme.sharedTheme().isDark()?"dark":"light")+"') }, false)",0,!0);d.configuration().userContentController().addUserScript(p),NSApplication.sharedApplication().addObserver_forKeyPath_options_context(h,"effectiveAppearance",NSKeyValueObservingOptionNew,null),NSThread.mainThread().threadDictionary()[e.id+".themeObserver"]=h;var m=o.new({utils:{setTitle:e.setTitle.bind(e),emitBrowserEvent(){try{e.emit.apply(e,arguments)}catch(e){if(void 0===t||!t.listenerCount||!t.listenerCount("uncaughtException"))throw console.error(e),e;t.emit("uncaughtException",e,"uncaughtException")}},emit(){try{e.webContents.emit.apply(e.webContents,arguments)}catch(e){if(void 0===t||!t.listenerCount||!t.listenerCount("uncaughtException"))throw console.error(e),e;t.emit("uncaughtException",e,"uncaughtException")}}},state:{wasReady:0}});d.setNavigationDelegate(m);var g=a.new({utils:{emit(t,n){if(n){for(var r=[],o=2;o<arguments.length;o+=1)r.push(arguments[o]);var a=e.webContents.listeners(n);i.all(a.map((function(e){return i.resolve().then((function(){return e.apply(e,r)}))}))).then((function(e){d.evaluateJavaScript_completionHandler(l.JS_BRIDGE_RESULT_SUCCESS+t+"("+JSON.stringify(e)+")",null)})).catch((function(e){d.evaluateJavaScript_completionHandler(l.JS_BRIDGE_RESULT_ERROR+t+"("+JSON.stringify(e)+")",null)}))}else d.evaluateJavaScript_completionHandler(l.JS_BRIDGE_RESULT_SUCCESS+t+"()",null)},parseWebArguments:u}});d.configuration().userContentController().addScriptMessageHandler_name(g,l.JS_BRIDGE);var v,S={emit(){try{e.emit.apply(e,arguments)}catch(e){if(void 0===t||!t.listenerCount||!t.listenerCount("uncaughtException"))throw console.error(e),e;t.emit("uncaughtException",e,"uncaughtException")}}};f.modal&&((v="Document"===f.parent.type?f.parent.sketchObject:f.parent)&&"MSDocumentData"===String(v.class())&&(v=v.delegate()),S.parentWindow=v.windowForSheet());var y=r.new({utils:S,panel:n});n.setDelegate(y)}}).call(this,n(26),n(9))},function(e,t,n){(function(t,n){var i,r,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(i===t)return t(e,0);if((i===a||!i)&&t)return i=t,t(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof t?t:a}catch(e){i=a}try{r="function"==typeof n?n:s}catch(e){r=s}}();var u,l=[],d=!1,f=-1;function h(){d&&u&&(d=!1,u.length?l=u.concat(l):f=-1,l.length&&p())}function p(){if(!d){var e=c(h);d=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,d=!1,function(e){if(r===n)return n(e);if((r===s||!r)&&n)return r=n,n(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||d||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}).call(this,n(4).setTimeout,n(4).clearTimeout)},function(module,exports){module.exports=function MochaDelegate(definition,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject),handlers={},ivars={};function setHandlerForSelector(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function(selector,dynamicFunction)}}function setIvar(e,t){var n=e in handlers;if(ivars[e]=t,!n){delegateClassDesc.addInstanceVariableWithName_typeEncoding(e,"@");var i=MOPropertyDescription.new();i.name=e,i.typeEncoding="@",i.weak=!0,i.ivarName=e,delegateClassDesc.addProperty(i)}}this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(e){var t=NSClassFromString(uniqueClassName).new();return Object.keys(ivars).forEach((function(e){t[e]=ivars[e]})),Object.keys(e||{}).forEach((function(n){t[n]=e[n]})),t},this.new=this.getClassInstance,"object"==typeof definition&&Object.keys(definition).forEach((function(e){"function"==typeof definition[e]?setHandlerForSelector(e,definition[e]):setIvar(e,definition[e])})),delegateClassDesc.registerClass()}},function(e,t){e.exports=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t&&t.constructor&&t.constructor===Array&&0!=t.length?t:null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MixColors=void 0,t.MixColors=function(e,t){for(var n=[e.r,e.g,e.b],i=[t.r,t.g,t.b],r=[],o=0;o<=2;o++){var a=i[o],s=n[o];r.push(s+(a-s)*(t.a||1))}return{r:Math.round(r[0]),g:Math.round(r[1]),b:Math.round(r[2]),a:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetLuminance=void 0,t.GetLuminance=function(e){var t,n,i,r,o,a;return t=e.r/255,n=e.g/255,i=e.b/255,r=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),a=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),Number((.2126*r+.7152*o+.0722*a).toFixed(2))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetColorSuggestions=t.GetNearestPassingColor=t.DetermineColorModification=void 0;var i=n(12),r=n(15),o=n(6);t.DetermineColorModification=function(e,t,n){void 0===n&&(n=.05);var o=i.LightenColor(e,n),a=i.DarkenColor(e,n);return r.GetContrastRatio(o,t)>r.GetContrastRatio(a,t)?"light":"dark"},t.GetNearestPassingColor=function(e,n,o,a,s){var c;void 0===o&&(o=.05),void 0===a&&(a=4.5);var u=t.DetermineColorModification(e,n,o);c=s?"light"===s?i.LightenColor:i.DarkenColor:"light"===u?i.LightenColor:i.DarkenColor;for(var l=o,d=r.GetContrastRatio(e,n),f=d<a,h=e;f;){var p=c(e,l+=o),m=d;(d=r.GetContrastRatio(p,n))>=a&&(h=p,f=!1),m===d&&(f=!1,d<a&&(h=t.GetNearestPassingColor(e,n,o,a,c===i.LightenColor?"dark":"light")))}return h},t.GetColorSuggestions=function(e,n,r,a,s){void 0===r&&(r=4),void 0===a&&(a=.05),void 0===s&&(s=.1);for(var c=t.DetermineColorModification(e,n,a),u=t.GetNearestPassingColor(e,n,a),l="light"===c?i.LightenColor:i.DarkenColor,d=[o.ConvertRgbaToRgbaString(u)],f=1;f<r;f++)d.push(o.ConvertRgbaToRgbaString(l(u,f*s)));var h=0;if(d.forEach((function(e,t){0!==t&&e===d[t-1]&&h++})),h>2){var p="light"===c?i.DarkenColor:i.LightenColor,m=t.GetNearestPassingColor(e,n,a,4.5,"light"===c?"dark":"light"),g=[o.ConvertRgbaToRgbaString(m)];for(f=1;f<r;f++)g.push(o.ConvertRgbaToRgbaString(p(m,.1*f)));var v=0;if(g.forEach((function(e,t){0!==t&&e===g[t-1]&&v++})),v<h)return g}return d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertHexToRgba=t.ConvertHexToRgbaString=void 0,t.ConvertHexToRgbaString=function(e){var t=e.startsWith("#")?e.substring(1,e.length+1):e,n={r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:parseInt(t.slice(6,8),16)/255};return"rgba("+n.r+", "+n.g+", "+n.b+", "+(n.a?n.a.toFixed(2):1)+")"},t.ConvertHexToRgba=function(e){var t=e.startsWith("#")?e.substring(1,e.length+1):e,n=parseInt(t.slice(6,8),16)/255||1;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:Number(n.toFixed(2))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetColorblindMatrixString=t.GetColorblindMatrixArray=t.SimulateColorblindness=void 0,t.SimulateColorblindness=function(e,t){var n=function(e){return e<0?0:e<255?e:255},i=e.r,r=e.g,o=e.b,a=e.a?e.a:1,s=i*t[0]+r*t[1]+o*t[2]+a*t[3]+t[4],c=i*t[5]+r*t[6]+o*t[7]+a*t[8]+t[9],u=i*t[10]+r*t[11]+o*t[12]+a*t[13]+t[14],l=i*t[15]+r*t[16]+o*t[17]+a*t[18]+t[19];return{r:Math.round(n(s)),g:Math.round(n(c)),b:Math.round(n(u)),a:n(l)}},t.GetColorblindMatrixArray=function(e){switch(e){case"Protanopia":return[.567,.433,0,0,0,.558,.442,0,0,0,0,.242,.758,0,0,0,0,0,1,0];case"Protanomaly":return[.817,.183,0,0,0,.333,.667,0,0,0,0,.125,.875,0,0,0,0,0,1,0];case"Deuteranopia":return[.625,.375,0,0,0,.7,.3,0,0,0,0,.3,.7,0,0,0,0,0,1,0];case"Deuteranomaly":return[.8,.2,0,0,0,.258,.742,0,0,0,0,.142,.858,0,0,0,0,0,1,0];case"Tritanopia":return[.95,.05,0,0,0,0,.433,.567,0,0,0,.475,.525,0,0,0,0,0,1,0];case"Tritanomaly":return[.967,.033,0,0,0,0,.733,.267,0,0,0,.183,.817,0,0,0,0,0,1,0];case"Achromatopsia":return[.299,.587,.114,0,0,.299,.587,.114,0,0,.299,.587,.114,0,0,0,0,0,1,0];case"Achromatomaly":return[.618,.32,.062,0,0,.163,.775,.062,0,0,.163,.32,.516,0,0,0,0,0,1,0];default:return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}},t.GetColorblindMatrixString=function(e){return t.GetColorblindMatrixArray(e).join(", ")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t){e.exports="file://"+context.plugin.urlForResourceNamed("_webpack_resources/382e82375e9410380a7dc4f1a8818864.html").path()},function(e,t,n){"use strict";n.r(t),n.d(t,"focusOrder",(function(){return J}));var i,r=n(1),o=n.n(r),a=n(16),s=n.n(a),c=n(0),u=n.n(c),l=n(17),d=n.n(l),f="user_id",h="keygenLicenseKey",p="subscription-status",m="email",g="plan",v="teamUser",S="mp_id",y=function(e,t){u.a.setSettingForKey("com.stark.".concat(e),t)},w=function(e){return u.a.settingForKey("com.stark.".concat(e))},b=function(e){d.a.message(e)},_=(n(2),n(3).Style,n(3).Style,n(3).Group),C=n(3).ShapePath,N=n(3).Style,R=n(3).Rectangle,M=n(3).Text,k=function(){var e=o.a.getSelectedDocument();return u.a.documentSettingForKey(e,"stark-fo-main-groups")||[]},x=function(e){var t=o.a.getSelectedDocument(),n=[],i=[];return e.forEach((function(e,r){var o=t.getLayerWithID(e);if(o){var a=u.a.layerSettingForKey(o,"stark-fo-sequences"),s=[];a&&(a.forEach((function(e,i){t.getLayerWithID(e.id)?n.push({id:e.id,name:e.name}):s.push(i)})),s.forEach((function(e){a.splice(e,1)})),u.a.setLayerSettingForKey(o,"stark-fo-sequences",a))}else i.push(r)})),i.forEach((function(t){e.splice(t,1)})),u.a.setDocumentSettingForKey(t,"stark-fo-main-groups",e),n},T=function(e){var t=o.a.getSelectedDocument(),n=t.getLayerWithID(e),i=[];return n.layers.forEach((function(e,r){var o=u.a.layerSettingForKey(e,"stark-fo-item"),a=t.getLayerWithID(o.id),s=a.layers[a.layers.length-1];s.text!=n.layers.length-r&&(a.name="".concat(n.layers.length-r," - ").concat(o.name),s.text="".concat(n.layers.length-r)),o&&i.push({associatedId:o.associatedId,id:o.id,name:o.name})})),i.reverse(),i},F=function(e,t){var n=o.a.getSelectedDocument(),i=n.getLayerWithID(e),r=i.getParentArtboard(),a=u.a.layerSettingForKey(r,"stark-fo-main-group"),s=n.getLayerWithID(a),c=u.a.layerSettingForKey(s,"stark-fo-sequences"),l=c.find((function(t){return t.id===e}));l&&(l.name=t,i.name=t,u.a.setLayerSettingForKey(s,"stark-fo-sequences",c))},E=function(e,t){var n=o.a.getSelectedDocument(),i=n.getLayerWithID(e),r=i.getParentArtboard(),a=u.a.layerSettingForKey(r,"stark-fo-main-group"),s=n.getLayerWithID(a),c=u.a.layerSettingForKey(s,"stark-fo-sequences");c.splice(t,1),i.remove(),c&&c.length>0&&u.a.setLayerSettingForKey(s,"stark-fo-sequences",c)},W=function(e,t){var n,i=o.a.getSelectedDocument(),r=i.selectedLayers;if(r.isEmpty)b("Please select a layer to attach a focus item to.");else if(r.length>1)b("A focus item can only be attached to one layer or group.");else{var a=r.layers[0].getParentArtboard();if(0===e){var s,c=u.a.layerSettingForKey(a,"stark-fo-main-group"),l=i.getLayerWithID(c);if(l){s=L(t.name,l);var d=u.a.layerSettingForKey(l,"stark-fo-sequences");d.push({id:s.id,name:s.name}),u.a.setLayerSettingForKey(l,"stark-fo-sequences",d)}else{l=B(a),s=L(t.name,l);var f=u.a.documentSettingForKey(i,"stark-fo-main-groups");f||(f=[]),f.push(l.id),u.a.setDocumentSettingForKey(i,"stark-fo-main-groups",f),u.a.setLayerSettingForKey(a,"stark-fo-main-group",l.id),u.a.setLayerSettingForKey(l,"stark-fo-sequences",[{id:s.id,name:s.name}])}s.moveToBack();var h=A(e+1,r.layers[0],s);u.a.setLayerSettingForKey(h,"stark-fo-item",{associatedId:r.layers[0].id,id:h.id,name:r.layers[0].name}),n={sequenceId:s.id,id:h.id,name:r.layers[0].name}}else{var p=i.getLayerWithID(t.id);(h=A(e+1,r.layers[0],p)).moveToBack(),u.a.setLayerSettingForKey(h,"stark-fo-item",{associatedId:r.layers[0].id,id:h.id,name:r.layers[0].name}),n={id:h.id,name:r.layers[0].name}}}return n},B=function(e){return new _({name:"Stark Focus Orders",parent:e,locked:!0})},L=function(e,t){return new _({name:e,parent:t,locked:!0})},A=function(e,t,n){var i=new R(0,0,24,24),r=new _({name:"".concat(e," - ").concat(t.name),parent:n,frame:new R(0,0,100,100)}),a=(new C({frame:{x:12,y:12,width:t.frame.width,height:t.frame.height},type:o.a.Types.ShapePath,name:"Dotted Line",shapeType:C.ShapeType.Rectangle,style:{borders:[{color:"#4B4B4E",fillType:N.FillType.Color,thickness:2}],borderOptions:{dashPattern:[4,2]}},parent:r}),new C({frame:i,type:o.a.Types.ShapePath,name:"Circle",shapeType:C.ShapeType.Oval,style:{fills:[{color:"#381FD1",fillType:N.FillType.Color}],borders:[{color:"#FFFFFF",fillType:N.FillType.Color,thickness:2}],shadows:[{color:"#00000022",blur:5,x:2,y:3,spread:1}]},parent:r})),s=new M({type:o.a.Types.Text,name:"Number",text:"".concat(e),style:{fontFamily:"Helvetica",textColor:"#FFFFFF",fontSize:16,fontWeight:8},parent:r});s.frame.x=(a.frame.width-s.frame.width)/2,s.frame.y=(a.frame.height-s.frame.height)/2;var c=new R(0,0,100,100).changeBasis({from:t,to:t.getParentArtboard()});return r.adjustToFit(),O(r,c.x-12,c.y-12),r},O=function(e,t,n){var i=function(e){for(var t={x:0,y:0},n=e.parent;n.name&&"Artboard"!==n.type;)t.x+=n.frame.x,t.y+=n.frame.y,n=n.parent;return t}(e),r=new o.a.Rectangle(e.frame);r.x=t-i.x,r.y=n-i.y,e.frame=r,I(e)},I=function(e){for(var t=e.parent;t&&t.name&&"Artboard"!==t.type;)t.adjustToFit(),t=t.parent},D=function(e,t){var n=o.a.getSelectedDocument(),i=n.getLayerWithID(e),r=n.getLayerWithID(t);i.index=r.index,i.parent.layers.forEach((function(e,t){var n=u.a.layerSettingForKey(e,"stark-fo-item");n&&(e.name="".concat(i.parent.layers.length-t," - ").concat(n.name),e.layers[e.layers.length-1].text="".concat(i.parent.layers.length-t))}))},P=function(e,t,n){var i=o.a.getSelectedDocument().getLayerWithID(n);if(i){i.name="".concat(e+1," - ").concat(t);var r=u.a.layerSettingForKey(i,"stark-fo-item");r.name=t,u.a.setLayerSettingForKey(i,"stark-fo-item",r)}},U=function(e){var t=o.a.getSelectedDocument().getLayerWithID(e),n=t.index,i=t.parent;t.remove(),i.layers.forEach((function(e,t){if(e.index<n){var r=u.a.layerSettingForKey(e,"stark-fo-item");r&&(e.name="".concat(i.layers.length-t," - ").concat(r.name),e.layers[e.layers.length-1].text="".concat(i.layers.length-t))}}))},z=[],V=[];function J(){var e={id:w(f),email:w(m),keygenLicenseKey:w(h),mp_id:w(S),status:w(p),plan:void 0===w(g)||""===w(g)?"FREE_TIER":w(g),teamUser:w(v),contrastFailMessageShown:void 0===w("contrast-fail-message-shown")||""===w("contrast-fail-message-shown")||w("contrast-fail-message-shown"),suggestionsTriesLeft:void 0===w("suggestions-tries-left")||""===w("suggestions-tries-left")?4:w("suggestions-tries-left")},t=new s.a({identifier:"stark.focus",frame:!1,height:604,width:400,resizable:!1,alwaysOnTop:!0,title:"focus-order",backgroundColor:"#FFF",show:!1,acceptsFirstMouse:!0}),r=t.webContents,o=k();if(o&&o.length>0){var a=x(o);z=a}var c={subscription:e,sequences:z,focusItems:V};t.once("ready-to-show",(function(){t.show()})),r.on("did-finish-load",(function(){r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("validationSuccessful",(function(e){!function(e){y(f,e.id),y(m,e.email),y(p,e.status),y(g,e.plan),y(v,e.teamUser)}(e)})),r.on("validationFailed",(function(){[f,h,p,m,g,S,v].forEach((function(e){y(e,"")}))})),r.on("createSequence",(function(e){var t=JSON.parse(e);z.find((function(e){return e.name===t.name}))?b("Sequence names must be unique."):(i={id:t.name,name:t.name},z.push(i),c.sequences=z,V=[],c.items=[],r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error))})),r.on("selectSequence",(function(e){var t=JSON.parse(e),n=z[t.index].id,o=T(n);i={id:n,name:t.name},V=o,c.items=V,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("saveNameSequence",(function(e){var t=JSON.parse(e);if(z.find((function(e){return e.name===t.name})))b("Sequence names must be unique.");else{var n=z[t.index].id;F(n,t.name),z[t.index].name=t.name,c.sequences=z,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)}})),r.on("deleteSequence",(function(e){var t=JSON.parse(e),n=z[t.index].id;E(n,t.index),i.id===n&&(c.items=[]),z.splice(t.index,1),c.sequences=z,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("addFocusItem",(function(){var e=W(V.length,i);e.sequenceId&&(z.find((function(e){return e.name===i.name})).id=e.sequenceId),V.push({id:e.id,name:e.name}),c.sequences=z,c.items=V,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("deleteFocusItem",(function(e){var t=JSON.parse(e),n=V[t.index].id;U(n),V.splice(t.index,1),c.items=V,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("saveNameFocusItem",(function(e){var t=JSON.parse(e),n=V[t.index].id;P(t.index,t.name,n),V[t.index].name=t.name,c.items=V,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("moveFocusItem",(function(e){var t=JSON.parse(e),n=V[t.startingIndex].id,i=V[t.destinationIndex].id;D(n,i);var o=V[t.startingIndex];V.splice(t.startingIndex,1),V.splice(t.destinationIndex,0,o),c.items=V,r.executeJavaScript("prepareFirstLoad('Focus', '".concat(JSON.stringify(c),"')")).catch(console.error)})),r.on("cancelButtonClicked",(function(){t.close()})),r.on("purchaseButtonClicked",(function(){!function(e){var t=NSURL.URLWithString(e);NSWorkspace.sharedWorkspace().openURL(t)}("https://getstark.co/pricing")})),t.loadURL(n(35))}}]);"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.focusOrder=__skpm_run.bind(this,"focusOrder"),that.onRun=__skpm_run.bind(this,"default");