var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=37)}([function(e,t){e.exports=require("sketch")},function(e,t){e.exports=require("sketch/settings")},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),a(n(19),t),a(n(8),t),a(n(11),t),a(n(20),t),a(n(21),t),a(n(22),t),a(n(9),t),a(n(6),t),a(n(23),t),a(n(10),t),a(n(24),t)},function(e,t){e.exports=require("sketch/dom")},function(e,t,n){var r,a,o=[];n(15)()?(o=[],r=function(e,t,n,r,a,i,s,c,l,u,d,f){var g=o.length;return o.push(coscript.scheduleWithInterval_jsFunction((t||0)/1e3,(function(){e(n,r,a,i,s,c,l,u,d,f)}))),g},a=function(e){var t=o[e];t&&(t.cancel(),o[e]=void 0)}):(r=function(e,t,n,r,i,s,c,l,u,d,f,g){coscript.shouldKeepAround=!0;var h=o.length;return o.push(!0),coscript.scheduleWithInterval_jsFunction((t||0)/1e3,(function(){o[h]&&e(n,r,i,s,c,l,u,d,f,g),a(h),o.every((function(e){return!e}))&&(coscript.shouldKeepAround=!1)})),h},a=function(e){o[e]=!1}),e.exports={setTimeout:r,clearTimeout:a}},function(e,t){e.exports={JS_BRIDGE:"__skpm_sketchBridge",JS_BRIDGE_RESULT_SUCCESS:"__skpm_sketchBridge_success",JS_BRIDGE_RESULT_ERROR:"__skpm_sketchBridge_error",START_MOVING_WINDOW:"__skpm_startMovingWindow",EXECUTE_JAVASCRIPT:"__skpm_executeJS",EXECUTE_JAVASCRIPT_SUCCESS:"__skpm_executeJS_success_",EXECUTE_JAVASCRIPT_ERROR:"__skpm_executeJS_error_"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertRgbaToHex=t.ConvertRgbaToBaseHsla=t.ConvertRgbaToHsla=t.ConvertRgbaToBaseRgba=t.ConvertBaseRgbaToRgba=t.ConvertRgbaStringToBaseRgba=t.ConvertRgbaStringToRgba=t.ConvertBaseRgbaToRgbaString=t.ConvertRgbaToRgbaString=void 0;var r=n(10);t.ConvertRgbaToRgbaString=function(e){return"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a?e.a:1,")")},t.ConvertBaseRgbaToRgbaString=function(e){return"rgba(".concat(Math.round(255*e.r),", ").concat(Math.round(255*e.g),", ").concat(Math.round(255*e.b),", ").concat(e.a?e.a:1,")")},t.ConvertRgbaStringToRgba=function(e){var t=r.RGBA_REGEX,n=e.match(t);return n&&(null==n?void 0:n.length)>0?{r:Number(n[1]),g:Number(n[2]),b:Number(n[3]),a:Number(n[4])}:{r:0,g:0,b:0,a:0}},t.ConvertRgbaStringToBaseRgba=function(e){var t=r.RGBA_REGEX,n=e.match(t);return n&&(null==n?void 0:n.length)>0?{r:Number(n[1])/255,g:Number(n[2])/255,b:Number(n[3])/255,a:Number(n[4])}:{r:0,g:0,b:0,a:0}},t.ConvertBaseRgbaToRgba=function(e,t){var n=e.a?e.a:1;return{r:255*e.r,g:255*e.g,b:255*e.b,a:t?255*n:n}},t.ConvertRgbaToBaseRgba=function(e,t){var n=e.a?e.a:255;return{r:e.r/255,g:e.g/255,b:e.b/255,a:t?n/255:n}},t.ConvertRgbaToHsla=function(e){var t,n=e.r/255,r=e.g/255,a=e.b/255,o=Math.max(n,r,a),i=Math.min(n,r,a),s=0,c=(o+i)/2;if(o===i)s=t=0;else{var l=o-i;switch(t=c>.5?l/(2-o-i):l/(o+i),o){case n:s=(r-a)/l+(r<a?6:0);break;case r:s=(a-n)/l+2;break;case a:s=(n-r)/l+4}s/=6}return{h:Math.round(360*s),s:Math.round(100*t),l:Math.round(100*c),a:e.a}},t.ConvertRgbaToBaseHsla=function(e){var t,n=e.r/255,r=e.g/255,a=e.b/255,o=Math.max(n,r,a),i=Math.min(n,r,a),s=0,c=(o+i)/2;if(o===i)s=t=0;else{var l=o-i;switch(t=c>.5?l/(2-o-i):l/(o+i),o){case n:s=(r-a)/l+(r<a?6:0);break;case r:s=(a-n)/l+2;break;case a:s=(n-r)/l+4}s/=6}return{h:s,s:t,l:c,a:e.a}},t.ConvertRgbaToHex=function(e,t,n){var r=function(e){return 1===e.length?"0"+e:""+e};return"".concat(t?"#":"").concat(r(Math.round(e.r).toString(16))).concat(r(Math.round(e.g).toString(16))).concat(r(Math.round(e.b).toString(16))).concat(n&&e.a?r(Math.round(255*e.a).toString(16)):"")}},function(e,t,n){var r=n(12),a=n(25),o=n(26),i=n(28),s=n(29),c=n(30),l=n(31),u=n(13),d=n(32);function f(e){var t=(e=e||{}).identifier||NSUUID.UUID().UUIDString(),n=NSThread.mainThread().threadDictionary(),g=f.fromId(t);if(g)return g;var h=new r;if(h.id=t,e.modal&&!e.parent)throw new Error("A modal needs to have a parent.");var p=coscript.createFiber(),m=e.width||800,y=e.height||600,v=NSScreen.screens().firstObject().frame(),S=NSMakeRect(void 0!==e.x?e.x:Math.round((NSWidth(v)-m)/2),void 0!==e.y?NSHeight(v)-e.y:Math.round((NSHeight(v)-y)/2),m,y);e.titleBarStyle&&"default"!==e.titleBarStyle&&(e.frame=!1);var b="textured"!==e.windowType,w=NSTitledWindowMask;!1!==e.minimizable&&(w|=NSMiniaturizableWindowMask),!1!==e.closable&&(w|=NSClosableWindowMask),!1!==e.resizable&&(w|=NSResizableWindowMask),b&&!e.transparent&&!1!==e.frame||(w|=NSTexturedBackgroundWindowMask);var C=NSPanel.alloc().initWithContentRect_styleMask_backing_defer(S,w,NSBackingStoreBuffered,!0),x=WKWebViewConfiguration.alloc().init(),T=WKWebView.alloc().initWithFrame_configuration(CGRectMake(0,0,e.width||800,e.height||600),x);if(c(T),T.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),a(h,C,T),o(h,C,T),d(h,C,T,e),"desktop"===e.windowType&&(C.setLevel(kCGDesktopWindowLevel-1),C.setCollectionBehavior(NSWindowCollectionBehaviorCanJoinAllSpaces|NSWindowCollectionBehaviorStationary|NSWindowCollectionBehaviorIgnoresCycle)),void 0===e.minWidth&&void 0===e.minHeight||h.setMinimumSize(e.minWidth||0,e.minHeight||0),void 0===e.maxWidth&&void 0===e.maxHeight||h.setMaximumSize(e.maxWidth||1e4,e.maxHeight||1e4),e.transparent||!1===e.frame){C.titlebarAppearsTransparent=!0,C.titleVisibility=NSWindowTitleHidden,C.setOpaque(0),C.isMovableByWindowBackground=!0;var k=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");k.setShowsBaselineSeparator(!1),C.setToolbar(k)}if("hiddenInset"===e.titleBarStyle){var F=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");F.setShowsBaselineSeparator(!1),C.setToolbar(F)}!1!==e.frame&&e.useContentSize||h.setSize(m,y),e.center&&h.center(),e.alwaysOnTop&&h.setAlwaysOnTop(!0),e.fullscreen&&h.setFullScreen(!0),h.setFullScreenable(!!e.fullscreenable);let N=e.title;!1===e.frame?N=void 0:void 0===N&&"undefined"!=typeof __command&&__command.pluginBundle()&&(N=__command.pluginBundle().name()),N&&h.setTitle(N);var L=e.backgroundColor;e.transparent&&(L=NSColor.clearColor()),!L&&!1===e.frame&&e.vibrancy&&(L=NSColor.clearColor()),h._setBackgroundColor(L||NSColor.windowBackgroundColor()),!1===e.hasShadow&&h.setHasShadow(!1),void 0!==e.opacity&&h.setOpacity(e.opacity),e.webPreferences=e.webPreferences||{},T.configuration().preferences().setValue_forKey(!1!==e.webPreferences.devTools,"developerExtrasEnabled"),T.configuration().preferences().setValue_forKey(!1!==e.webPreferences.javascript,"javaScriptEnabled"),T.configuration().preferences().setValue_forKey(!!e.webPreferences.plugins,"plugInsEnabled"),T.configuration().preferences().setValue_forKey(e.webPreferences.minimumFontSize||0,"minimumFontSize"),e.webPreferences.zoomFactor&&T.setMagnification(e.webPreferences.zoomFactor);var M=C.contentView();return!1!==e.frame?(T.setFrame(M.bounds()),M.addSubview(T)):(M.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),i(M,M.superview()),T.setFrame(M.bounds()),M.addSubview(T),C.standardWindowButton(NSWindowFullScreenButton)&&C.standardWindowButton(NSWindowFullScreenButton).setHidden(!0),e.titleBarStyle&&"default"!==e.titleBarStyle||(C.standardWindowButton(NSWindowZoomButton).setHidden(!0),C.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),C.standardWindowButton(NSWindowCloseButton).setHidden(!0),C.standardWindowButton(NSWindowZoomButton).setEnabled(!1))),e.vibrancy&&h.setVibrancy(e.vibrancy),h.setMaximizable(!1!==e.maximizable),C.setHidesOnDeactivate(!1!==e.hidesOnDeactivate),e.remembersWindowFrame&&(C.setFrameAutosaveName(t),C.setFrameUsingName_force(C.frameAutosaveName(),!1)),e.acceptsFirstMouse&&h.on("focus",(function(e){e.type()===NSEventTypeLeftMouseDown&&h.webContents.executeJavaScript(s(T,e)).catch(()=>{})})),u.injectScript(T),l.injectScript(T),l.setupHandler(h),!1!==e.show&&h.show(),h.on("closed",(function(){h._destroyed=!0,n.removeObjectForKey(t);var e=n[t+".themeObserver"];e&&(NSApplication.sharedApplication().removeObserver_forKeyPath(e,"effectiveAppearance"),n.removeObjectForKey(t+".themeObserver")),p.cleanup()})),n[t]=C,p.onCleanup((function(){h._destroyed||h.destroy()})),h}f.fromId=function(e){var t=NSThread.mainThread().threadDictionary();if(t[e])return f.fromPanel(t[e],e)},f.fromPanel=function(e,t){var n=new r;if(n.id=t,!e||!e.contentView)throw new Error("needs to pass an NSPanel");for(var i=null,s=e.contentView().subviews(),c=0;c<s.length;c+=1)i||s[c].isKindOfClass(WKInspectorWKWebView)||!s[c].isKindOfClass(WKWebView)||(i=s[c]);if(!i)throw new Error("The panel needs to have a webview");return a(n,e,i),o(n,e,i),n},e.exports=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightenColor=t.DarkenColor=void 0;var r=n(9),a=n(6);t.DarkenColor=function(e,t){var n=(0,a.ConvertRgbaToBaseHsla)(e);return n.l-=t,n.l<0&&(n.l=0),(0,r.ConvertBaseHslaToRgba)(n)},t.LightenColor=function(e,t){var n=(0,a.ConvertRgbaToBaseHsla)(e);return n.l+=t,n.l>1&&(n.l=1),(0,r.ConvertBaseHslaToRgba)(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertBaseHslaToRgba=void 0,t.ConvertBaseHslaToRgba=function(e){var t,n,r,a=function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e};if(0===e.s)t=n=r=e.l;else{var o=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,i=2*e.l-o;t=a(i,o,e.h+1/3),n=a(i,o,e.h),r=a(i,o,e.h-1/3)}return{r:Math.round(255*t),g:Math.round(255*n),b:Math.round(255*r),a:e.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BLURRED=t.CB_ACHROLY=t.CB_ACHRO=t.CB_TRITALY=t.CB_TRITA=t.CB_DEUTERLY=t.CB_DEUTER=t.CB_PROTALY=t.CB_PROTA=t.RGBA_REGEX=void 0,t.RGBA_REGEX=/rgba?\((\d+.?\d+|\d),\s*(\d+.?\d+|\d),\s*(\d+.?\d+|\d),\s*(\d+.?\d+|\d)?\)/,t.CB_PROTA="Protanopia",t.CB_PROTALY="Protanomaly",t.CB_DEUTER="Deuteranopia",t.CB_DEUTERLY="Deuteranomaly",t.CB_TRITA="Tritanopia",t.CB_TRITALY="Tritanomaly",t.CB_ACHRO="Achromatopsia",t.CB_ACHROLY="Achromatomaly",t.BLURRED="Blurred"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetContrastRatio=void 0,t.GetContrastRatio=function(e,t,n){var r=function(e){var t,n,r;return t=e.r/255,n=e.g/255,r=e.b/255,.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},a=(Math.max(r(e),r(t))+.05)/(Math.min(r(e),r(t))+.05);if(n){var o=String(a);if(-1!==o.indexOf(".")){var i=o.split(".");a=1===i.length?Number(o):Number(i[0]+"."+i[1].charAt(0)+i[1].charAt(1))}a=Number(a.toFixed(2))}return a}},function(e,t){e.exports=require("events")},function(e,t,n){(function(t){var r=n(5);e.exports=function(n,a){return function o(i,s,c){"function"==typeof s&&(c=s,s=!1);var l=coscript.createFiber();return n.navigationDelegate().state&&0==n.navigationDelegate().state.wasReady?new t((function(e,t){a.once("ready-to-show",(function(){o(i,s,c).then(e).catch(t),l.cleanup()}))})):new t((function(t,o){var s=Math.random();a.webContents.on(r.EXECUTE_JAVASCRIPT_SUCCESS+s,(function(e){try{c&&c(null,e),t(e)}catch(e){o(e)}l.cleanup()})),a.webContents.on(r.EXECUTE_JAVASCRIPT_ERROR+s,(function(e){try{c?(c(e),t()):o(e)}catch(e){o(e)}l.cleanup()})),n.evaluateJavaScript_completionHandler(e.exports.wrapScript(i,s),null)}))}},e.exports.wrapScript=function(e,t){return"window."+r.EXECUTE_JAVASCRIPT+"("+t+", "+JSON.stringify(e)+")"},e.exports.injectScript=function(e){var t="window."+r.EXECUTE_JAVASCRIPT+' = function(id, script) {  try {    var res = eval(script);    if (res && typeof res.then === "function" && typeof res.catch === "function") {      res.then(function (res2) {        window.postMessage("'+r.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res2);      })      .catch(function (err) {        window.postMessage("'+r.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);      })    } else {      window.postMessage("'+r.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res);    }  } catch (err) {    window.postMessage("'+r.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);  }}',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}}).call(this,n(14))},function(e,t,n){"use strict";(function(t,n){var r=t;function a(e){return Boolean(e&&void 0!==e.length)}function o(){}function i(e){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void l(t.promise,e)}c(t.promise,r)}else(1===e._state?c:l)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof i)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void d(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){l(e,t)}}function l(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&i._immediateFn((function(){e._handled||i._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function d(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,l(t,e))}))}catch(e){if(n)return;n=!0,l(t,e)}}i.prototype.catch=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},i.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},i.all=function(e){return new i((function(t,n){if(!a(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){i(e,t)}),n)}r[e]=a,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)i(s,r[s])}))},i.allSettled=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var a=r.length;function o(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var i=n.then;if("function"==typeof i)return void i.call(n,(function(t){o(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--a&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--a&&t(r)}for(var i=0;i<r.length;i++)o(i,r[i])}))},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i((function(t){t(e)}))},i.reject=function(e){return new i((function(t,n){n(e)}))},i.race=function(e){return new i((function(t,n){if(!a(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)i.resolve(e[r]).then(t,n)}))},i._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){r(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=i}).call(this,n(4).setTimeout,n(27).setImmediate)},function(e,t){e.exports=function(){return"undefined"!=typeof coscript&&coscript.createFiber}},function(e,t,n){var r,a,o=[];n(15)()?(r=function(e,t,n,r,a,i,s,c,l,u,d,f){var g=o.length;return o.push(coscript.scheduleWithRepeatingInterval_jsFunction((t||0)/1e3,(function(){e(n,r,a,i,s,c,l,u,d,f)}))),g},a=function(e){var t=o[e];t&&(t.cancel(),o[e]=void 0)}):(r=function(e,t,n,r,a,i,s,c,l,u,d,f){coscript.shouldKeepAround=!0;var g=o.length;return o.push(!0),function h(){coscript.scheduleWithInterval_jsFunction((t||0)/1e3,(function(){o[g]&&(e(n,r,a,i,s,c,l,u,d,f),h())}))}(),g},a=function(e){o[e]=!1,o.every((function(e){return!e}))&&(coscript.shouldKeepAround=!1)}),e.exports={setInterval:r,clearInterval:a}},function(e,t,n){var r=NSThread.mainThread().threadDictionary();e.exports.getWebview=function(e){return n(7).fromId(e)},e.exports.isWebviewPresent=function(e){return!!r[e]},e.exports.sendToWebview=function(t,n){if(e.exports.isWebviewPresent(t)){for(var a=null,o=r[t].contentView().subviews(),i=0;i<o.length;i+=1)a||o[i].isKindOfClass(WKInspectorWKWebView)||!o[i].isKindOfClass(WKWebView)||(a=o[i]);if(!a||!a.evaluateJavaScript_completionHandler)throw new Error("Webview "+t+" not found");a.evaluateJavaScript_completionHandler(n,null)}}},function(e,t){e.exports=require("sketch/ui")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MixColors=void 0,t.MixColors=function(e,t){for(var n=[e.r,e.g,e.b],r=[t.r,t.g,t.b],a=[],o=0;o<=2;o++){var i=r[o],s=n[o];a.push(s+(i-s)*(t.a||1))}return{r:Math.round(a[0]),g:Math.round(a[1]),b:Math.round(a[2]),a:1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetLuminance=void 0,t.GetLuminance=function(e){var t,n,r,a,o,i;return t=e.r/255,n=e.g/255,r=e.b/255,a=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4),o=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),i=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),Number((.2126*a+.7152*o+.0722*i).toFixed(2))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetColorSuggestions=t.GetNearestPassingColor=t.DetermineColorModification=void 0;var r=n(8),a=n(11),o=n(6);t.DetermineColorModification=function(e,t,n){void 0===n&&(n=.05);var o=(0,r.LightenColor)(e,n),i=(0,r.DarkenColor)(e,n);return(0,a.GetContrastRatio)(o,t)>(0,a.GetContrastRatio)(i,t)?"light":"dark"},t.GetNearestPassingColor=function(e,n,o,i,s){var c;void 0===o&&(o=.05),void 0===i&&(i=4.5);var l=(0,t.DetermineColorModification)(e,n,o);c=s?"light"===s?r.LightenColor:r.DarkenColor:"light"===l?r.LightenColor:r.DarkenColor;for(var u=o,d=(0,a.GetContrastRatio)(e,n),f=d<i,g=e;f;){var h=c(e,u+=o),p=d;(d=(0,a.GetContrastRatio)(h,n))>=i&&(g=h,f=!1),p===d&&(f=!1,d<i&&(g=(0,t.GetNearestPassingColor)(e,n,o,i,c===r.LightenColor?"dark":"light")))}return g},t.GetColorSuggestions=function(e,n,a,i,s){void 0===a&&(a=4),void 0===i&&(i=.05),void 0===s&&(s=.1);for(var c=(0,t.DetermineColorModification)(e,n,i),l=(0,t.GetNearestPassingColor)(e,n,i),u="light"===c?r.LightenColor:r.DarkenColor,d=[(0,o.ConvertRgbaToRgbaString)(l)],f=1;f<a;f++)d.push((0,o.ConvertRgbaToRgbaString)(u(l,f*s)));var g=0;if(d.forEach((function(e,t){0!==t&&e===d[t-1]&&g++})),g>2){var h="light"===c?r.DarkenColor:r.LightenColor,p=(0,t.GetNearestPassingColor)(e,n,i,4.5,"light"===c?"dark":"light"),m=[(0,o.ConvertRgbaToRgbaString)(p)];for(f=1;f<a;f++)m.push((0,o.ConvertRgbaToRgbaString)(h(p,.1*f)));var y=0;if(m.forEach((function(e,t){0!==t&&e===m[t-1]&&y++})),y<g)return m}return d}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertHexToRgba=t.ConvertHexToRgbaString=void 0,t.ConvertHexToRgbaString=function(e){var t=e.startsWith("#")?e.substring(1,e.length+1):e,n={r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:parseInt(t.slice(6,8),16)/255};return"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a?n.a.toFixed(2):1,")")},t.ConvertHexToRgba=function(e){var t=e.startsWith("#")?e.substring(1,e.length+1):e,n=parseInt(t.slice(6,8),16)/255||1;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:Number(n.toFixed(2))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetColorblindMatrixString=t.GetColorblindMatrixArray=t.SimulateColorblindness=void 0,t.SimulateColorblindness=function(e,t){var n=function(e){return e<0?0:e<255?e:255},r=e.r,a=e.g,o=e.b,i=e.a?e.a:1,s=r*t[0]+a*t[1]+o*t[2]+i*t[3]+t[4],c=r*t[5]+a*t[6]+o*t[7]+i*t[8]+t[9],l=r*t[10]+a*t[11]+o*t[12]+i*t[13]+t[14],u=r*t[15]+a*t[16]+o*t[17]+i*t[18]+t[19];return{r:Math.round(n(s)),g:Math.round(n(c)),b:Math.round(n(l)),a:n(u)}},t.GetColorblindMatrixArray=function(e){switch(e){case"Protanopia":return[.152,1.053,-.205,0,0,.115,.786,.099,0,0,-.004,-.048,1.052,0,0,0,0,0,1,0];case"Protanomaly":return[.817,.183,0,0,0,.333,.667,0,0,0,0,.125,.875,0,0,0,0,0,1,0];case"Deuteranopia":return[.367,.861,-.228,0,0,.28,.673,.047,0,0,-.012,.043,.969,0,0,0,0,0,1,0];case"Deuteranomaly":return[.8,.2,0,0,0,.258,.742,0,0,0,0,.142,.858,0,0,0,0,0,1,0];case"Tritanopia":return[1.256,-.077,-.179,0,0,-.078,.931,.148,0,0,.005,.691,.304,0,0,0,0,0,1,0];case"Tritanomaly":return[.967,.033,0,0,0,0,.733,.267,0,0,0,.183,.817,0,0,0,0,0,1,0];case"Achromatopsia":return[.213,.715,.072,0,0,.213,.715,.072,0,0,.213,.715,.072,0,0,0,0,0,1,0];case"Achromatomaly":return[.618,.32,.062,0,0,.163,.775,.062,0,0,.163,.32,.516,0,0,0,0,0,1,0];default:return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]}},t.GetColorblindMatrixString=function(e){return(0,t.GetColorblindMatrixArray)(e).join(", ")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t){e.exports=function(e,t,n){function r(n){e.isVisible()&&(n?(NSApplication.sharedApplication().activateIgnoringOtherApps(!0),t.makeKeyAndOrderFront(null)):(t.orderBack(null),NSApp.mainWindow().makeKeyAndOrderFront(null)))}e._panel=t,e._webview=n,e._destroyed=!1,e.destroy=function(){return t.close()},e.close=function(){if(t.delegate().utils&&t.delegate().utils.parentWindow){var n=!0;return e.emit("close",{get defaultPrevented(){return!n},preventDefault:function(){n=!1}}),void(n&&t.delegate().utils.parentWindow.endSheet(t))}e.isClosable()&&t.performClose(null)},e.focus=r.bind(this,!0),e.blur=r.bind(this,!1),e.isFocused=function(){return t.isKeyWindow()},e.isDestroyed=function(){return e._destroyed},e.show=function(){return NSApp.activateIgnoringOtherApps(!0),t.delegate().utils&&t.delegate().utils.parentWindow?t.delegate().utils.parentWindow.beginSheet_completionHandler(t,__mocha__.createBlock_function("v16@?0q8",(function(){e.emit("closed")}))):t.makeKeyAndOrderFront(null)},e.showInactive=function(){return t.orderFrontRegardless()},e.hide=function(){return t.orderOut(null)},e.isVisible=function(){return t.isVisible()},e.isModal=function(){return!1},e.maximize=function(){e.isMaximized()||t.zoom(null)},e.unmaximize=function(){e.isMaximized()&&t.zoom(null)},e.isMaximized=function(){if(0!=(t.styleMask()&NSResizableWindowMask))return t.isZoomed();var e=NSScreen.mainScreen().visibleFrame(),n=t.frame();return e.origin.x==n.origin.x&&e.origin.y==n.origin.y&&e.size.width==n.size.width&&e.size.height==n.size.height},e.minimize=function(){return t.miniaturize(null)},e.restore=function(){return t.deminiaturize(null)},e.isMinimized=function(){return t.isMiniaturized()},e.setFullScreen=function(n){n!==e.isFullscreen()&&t.toggleFullScreen(null)},e.isFullscreen=function(){return t.styleMask()&NSFullScreenWindowMask},e.setAspectRatio=function(e){e>0?t.setAspectRatio(NSMakeSize(e,1)):t.setResizeIncrements(NSMakeSize(1,1))},e.setBounds=function(n,r){if(!n)return;if(e.isFullscreen())return;const a=Object.assign(e.getBounds(),n);var o=NSMakeRect(a.x,0,a.width,a.height),i=NSScreen.screens().firstObject();o.origin.y=NSHeight(i.frame())-a.y,t.setFrame_display_animate(o,!0,r)},e.getBounds=function(){const e=t.frame();var n=NSScreen.screens().firstObject().frame();return{x:e.origin.x,y:Math.round(NSHeight(n)-e.origin.y),width:e.size.width,height:e.size.height}},e.setContentBounds=function(t,n){e.setBounds(t,n)},e.getContentBounds=function(){return e.getBounds()},e.setSize=function(t,n,r){return e.setBounds({width:t,height:n},r)},e.getSize=function(){var t=e.getBounds();return[t.width,t.height]},e.setContentSize=function(t,n,r){return e.setContentBounds({width:t,height:n},r)},e.getContentSize=function(){var t=e.getContentBounds();return[t.width,t.height]},e.setMinimumSize=function(e,n){const r=CGSizeMake(e,n);t.setContentMinSize(r)},e.getMinimumSize=function(){const e=t.contentMinSize();return[e.width,e.height]},e.setMaximumSize=function(e,n){const r=CGSizeMake(e,n);t.setContentMaxSize(r)},e.getMaximumSize=function(){const e=t.contentMaxSize();return[e.width,e.height]},e.setResizable=function(t){return e._setStyleMask(t,NSResizableWindowMask)},e.isResizable=function(){return t.styleMask()&NSResizableWindowMask},e.setMovable=function(e){return t.setMovable(e)},e.isMovable=function(){return t.isMovable()},e.setMinimizable=function(t){return e._setStyleMask(t,NSMiniaturizableWindowMask)},e.isMinimizable=function(){return t.styleMask()&NSMiniaturizableWindowMask},e.setMaximizable=function(e){t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).setEnabled(e)},e.isMaximizable=function(){return t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).isEnabled()},e.setFullScreenable=function(t){e._setCollectionBehavior(t,NSWindowCollectionBehaviorFullScreenPrimary),e._setCollectionBehavior(!t,NSWindowCollectionBehaviorFullScreenAuxiliary)},e.isFullScreenable=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorFullScreenPrimary},e.setClosable=function(t){e._setStyleMask(t,NSClosableWindowMask)},e.isClosable=function(){return t.styleMask()&NSClosableWindowMask},e.setAlwaysOnTop=function(e,n,r){var a=NSNormalWindowLevel,o=CGWindowLevelForKey(kCGMaximumWindowLevelKey),i=CGWindowLevelForKey(kCGMinimumWindowLevelKey);e&&(a="normal"===n?NSNormalWindowLevel:"torn-off-menu"===n?NSTornOffMenuWindowLevel:"modal-panel"===n?NSModalPanelWindowLevel:"main-menu"===n?NSMainMenuWindowLevel:"status"===n?NSStatusWindowLevel:"pop-up-menu"===n?NSPopUpMenuWindowLevel:"screen-saver"===n?NSScreenSaverWindowLevel:"dock"===n?NSDockWindowLevel:NSFloatingWindowLevel);var s=a+(r||0);if(!(s>=i&&s<=o))throw new Error("relativeLevel must be between "+i+" and "+o);t.setLevel(s)},e.isAlwaysOnTop=function(){return t.level()!==NSNormalWindowLevel},e.moveTop=function(){return t.orderFrontRegardless()},e.center=function(){t.center()},e.setPosition=function(t,n,r){return e.setBounds({x:t,y:n},r)},e.getPosition=function(){var t=e.getBounds();return[t.x,t.y]},e.setTitle=function(e){t.setTitle(e)},e.getTitle=function(){return String(t.title())};var a=0;e.flashFrame=function(e){e?a=NSApp.requestUserAttention(NSInformationalRequest):(NSApp.cancelUserAttentionRequest(a),a=0)},e.getNativeWindowHandle=function(){return t},e.getNativeWebViewHandle=function(){return n},e.loadURL=function(e){if(/^(?!https?|file).*\.html?$/.test(e)&&"undefined"!=typeof __command&&__command.pluginBundle()&&(e="file://"+__command.pluginBundle().urlForResourceNamed(e).path()),/^file:\/\/.*\.html?$/.test(e))return e=(e=NSString.alloc().initWithString(e)).stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()),void n.loadFileURL_allowingReadAccessToURL(NSURL.URLWithString(e),NSURL.URLWithString("file:///"));const t=NSURL.URLWithString(e),r=NSURLRequest.requestWithURL(t);n.loadRequest(r)},e.reload=function(){n.reload()},e.setHasShadow=function(e){return t.setHasShadow(e)},e.hasShadow=function(){return t.hasShadow()},e.setOpacity=function(e){return t.setAlphaValue(e)},e.getOpacity=function(){return t.alphaValue()},e.setVisibleOnAllWorkspaces=function(t){return e._setCollectionBehavior(t,NSWindowCollectionBehaviorCanJoinAllSpaces)},e.isVisibleOnAllWorkspaces=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorCanJoinAllSpaces},e.setIgnoreMouseEvents=function(e){return t.setIgnoresMouseEvents(e)},e.setContentProtection=function(e){t.setSharingType(e?NSWindowSharingNone:NSWindowSharingReadOnly)},e.setAutoHideCursor=function(e){t.setDisableAutoHideCursor(e)},e.setVibrancy=function(n){var r=e._vibrantView;if(!n){if(null==r)return;return r.removeFromSuperview(),void t.setVibrantView(null)}if(null==r){var a=t.contentView();r=NSVisualEffectView.alloc().initWithFrame(a.bounds()),e._vibrantView=r,r.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),r.setBlendingMode(NSVisualEffectBlendingModeBehindWindow),r.setState(NSVisualEffectStateActive),r.setFrame(a.bounds()),a.addSubview_positioned_relativeTo(r,NSWindowBelow,null)}var o=NSVisualEffectMaterialLight;"appearance-based"===n?o=NSVisualEffectMaterialAppearanceBased:"light"===n?o=NSVisualEffectMaterialLight:"dark"===n?o=NSVisualEffectMaterialDark:"titlebar"===n?o=NSVisualEffectMaterialTitlebar:"selection"===n?o=NSVisualEffectMaterialSelection:"menu"===n?o=NSVisualEffectMaterialMenu:"popover"===n?o=NSVisualEffectMaterialPopover:"sidebar"===n?o=NSVisualEffectMaterialSidebar:"medium-light"===n?o=NSVisualEffectMaterialMediumLight:"ultra-dark"===n&&(o=NSVisualEffectMaterialUltraDark),r.setMaterial(o)},e._setBackgroundColor=function(e){var r=function(e){if(!e||"#"!==e[0]){if(e&&"function"==typeof e.isKindOfClass&&e.isKindOfClass(NSColor))return e;throw new Error("Incorrect color formating. It should be an hex color: #RRGGBBAA")}var t,n=e.substr(1);if(3===n.length?n+="F":6===n.length&&(n+="FF"),4===n.length)for(var r=0;r<4;r+=1)t+=n[r],t+=n[r];else{if(8!==n.length)return NSColor.whiteColor();t=n}var a=parseInt(t.slice(0,2),16)/255,o=parseInt(t.slice(2,4),16)/255,i=parseInt(t.slice(4,6),16)/255,s=parseInt(t.slice(6,8),16)/255;return NSColor.colorWithSRGBRed_green_blue_alpha(a,o,i,s)}(e);n.setValue_forKey(!1,"drawsBackground"),t.backgroundColor=r},e._invalidate=function(){t.flushWindow(),t.contentView().setNeedsDisplay(!0)},e._setStyleMask=function(n,r){var a=e.isMaximizable();n?t.setStyleMask(t.styleMask()|r):t.setStyleMask(t.styleMask()&~r),e.setMaximizable(a)},e._setCollectionBehavior=function(n,r){var a=e.isMaximizable();n?t.setCollectionBehavior(t.collectionBehavior()|r):t.setCollectionBehavior(t.collectionBehavior()&~r),e.setMaximizable(a)},e._showWindowButton=function(e){var n=t.standardWindowButton(e);n.superview().addSubview_positioned_relative(n,NSWindowAbove,null)}}},function(e,t,n){var r=n(12),a=n(13);e.exports=function(e,t,n){var o=new r;o.loadURL=e.loadURL,o.loadFile=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.downloadURL=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.getURL=function(){return String(n.URL())},o.getTitle=function(){return String(n.title())},o.isDestroyed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.focus=e.focus,o.isFocused=e.isFocused,o.isLoading=function(){return!!n.loading()},o.isLoadingMainFrame=function(){return!!n.loading()},o.isWaitingForResponse=function(){return!n.loading()},o.stop=function(){n.stopLoading()},o.reload=function(){n.reload()},o.reloadIgnoringCache=function(){n.reloadFromOrigin()},o.canGoBack=function(){return!!n.canGoBack()},o.canGoForward=function(){return!!n.canGoForward()},o.canGoToOffset=function(e){return!!n.backForwardList().itemAtIndex(e)},o.clearHistory=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.goBack=function(){n.goBack()},o.goForward=function(){n.goForward()},o.goToIndex=function(e){var t=n.backForwardList(),r=t.backList(),a=r.count();if(a>e)n.loadRequest(NSURLRequest.requestWithURL(r[e]));else{var o=t.forwardList();if(!(o.count()>e-a))throw new Error("Cannot go to index "+e);n.loadRequest(NSURLRequest.requestWithURL(o[e-a]))}},o.goToOffset=function(e){if(!o.canGoToOffset(e))throw new Error("Cannot go to offset "+e);n.loadRequest(NSURLRequest.requestWithURL(n.backForwardList().itemAtIndex(e)))},o.isCrashed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setUserAgent=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.getUserAgent=function(){const e=n.customUserAgent();return e?String(e):void 0},o.insertCSS=function(e){var t="var style = document.createElement('style'); style.innerHTML = "+e.replace(/"/,'\\"')+"; document.head.appendChild(style);",r=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);n.configuration().userContentController().addUserScript(r)},o.insertJS=function(e){var t=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(e,0,!0);n.configuration().userContentController().addUserScript(t)},o.executeJavaScript=a(n,e),o.setIgnoreMenuShortcuts=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.isAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setZoomFactor=function(e){n.setMagnification_centeredAtPoint(e,CGPointMake(0,0))},o.getZoomFactor=function(e){e(Number(n.magnification()))},o.setZoomLevel=function(e){o.setZoomFactor(Math.pow(1.2,e))},o.getZoomLevel=function(e){e(Math.log(Number(n.magnification()))/Math.log(1.2))},o.setVisualZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setLayoutZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.send=function(){const e="window.postMessage({isSketchMessage: true,origin: '"+String(__command.identifier())+"',args: "+JSON.stringify([].slice.call(arguments))+'}, "*")';n.evaluateJavaScript_completionHandler(e,null)},o.getNativeWebview=function(){return n},e.webContents=o}},function(e,t,n){var r=n(4);e.exports={setImmediate:function(e,t,n,a,o,i,s,c,l,u,d){return r.setTimeout(e,0,t,n,a,o,i,s,c,l,u,d)},clearImmediate:function(e){return r.clearTimeout(e)}}},function(e,t){function n(e,t,n,r){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(t,e,NSLayoutRelationEqual,n,e,1,r))}e.exports=function(e,t,r){r=r||[],e.setTranslatesAutoresizingMaskIntoConstraints(!1),n(NSLayoutAttributeLeft,e,t,r[0]||0),n(NSLayoutAttributeTop,e,t,r[1]||0),n(NSLayoutAttributeRight,e,t,r[2]||0),n(NSLayoutAttributeBottom,e,t,r[3]||0)}},function(e,t){e.exports=function(e,t){var n=e.convertPoint_fromView(t.locationInWindow(),null);return"var el = document.elementFromPoint("+n.x+", "+n.y+'); if (el && el.tagName === "SELECT") {  var event = document.createEvent("MouseEvents");  event.initMouseEvent("mousedown", true, true, window);  el.dispatchEvent(event);} else if (el && ["text", "textarea", "date", "datetime-local", "email", "number", "month", "password", "search", "tel", "time", "url", "week" ].indexOf(el.type) >= 0 && el.focus) {el.focus();} else if (el) {el.dispatchEvent(new Event("click", {bubbles: true}))}'}},function(e,t,n){var r=n(5);e.exports=function(e){var t='window.originalPostMessage = window.postMessage;window.postMessage = function(actionName) {  if (!actionName) {    throw new Error(\'missing action name\')  }  var id = String(Math.random()).replace(".", "");    var args = [].slice.call(arguments);    args.unshift(id);  return new Promise(function (resolve, reject) {    window["'+r.JS_BRIDGE_RESULT_SUCCESS+'" + id] = resolve;    window["'+r.JS_BRIDGE_RESULT_ERROR+'" + id] = reject;    window.webkit.messageHandlers.'+r.JS_BRIDGE+".postMessage(JSON.stringify(args));  });}",n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}},function(e,t,n){(function(t,r){var a=n(5);e.exports.injectScript=function(e){var t='(function () {document.addEventListener(\'mousedown\', onMouseDown);function shouldDrag(target) {  if (!target || (target.dataset || {}).appRegion === "no-drag") { return false }  if ((target.dataset || {}).appRegion === "drag") { return true }  return shouldDrag(target.parentElement)};function onMouseDown(e) {  if (e.button !== 0 || !shouldDrag(e.target)) { return }  window.postMessage("'+a.START_MOVING_WINDOW+'");};})()',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)},e.exports.setupHandler=function(e){var n=null,o=null,i=null;function s(){if(!o||1!==NSEvent.pressedMouseButtons())return t(i),n=null,void(o=null);var r=NSEvent.mouseLocation();e.setPosition(o.x+(r.x-n.x),o.y+(n.y-r.y),!1)}e.webContents.on(a.START_MOVING_WINDOW,(function(){n=NSEvent.mouseLocation();var t=e.getPosition();o={x:t[0],y:t[1]},i=r(s,1e3/60)}))}}).call(this,n(16).clearInterval,n(16).setInterval)},function(e,t,n){(function(t,r){var a,o,i,s,c=n(34),l=n(35),u=n(5);e.exports=function(e,n,d,f){s||(s=new c({utils:null,"observeValueForKeyPath:ofObject:change:context:":function(e,t,n){const r=n[NSKeyValueChangeNewKey],a="NSAppearanceNameDarkAqua"===String(r.bestMatchFromAppearancesWithNames(["NSAppearanceNameAqua","NSAppearanceNameDarkAqua"]));this.utils.executeJavaScript("document.body.classList.remove('__skpm-"+(a?"light":"dark")+"'); document.body.classList.add('__skpm-"+(a?"dark":"light")+"')")}})),a||(a=new c({utils:null,panel:null,"windowDidResize:":function(){this.utils.emit("resize")},"windowDidMiniaturize:":function(){this.utils.emit("minimize")},"windowDidDeminiaturize:":function(){this.utils.emit("restore")},"windowDidEnterFullScreen:":function(){this.utils.emit("enter-full-screen")},"windowDidExitFullScreen:":function(){this.utils.emit("leave-full-screen")},"windowDidMove:":function(){this.utils.emit("move"),this.utils.emit("moved")},"windowShouldClose:":function(){var e=1;return this.utils.emit("close",{get defaultPrevented(){return!e},preventDefault:function(){e=0}}),e},"windowWillClose:":function(){this.utils.emit("closed")},"windowDidBecomeKey:":function(){this.utils.emit("focus",this.panel.currentEvent())},"windowDidResignKey:":function(){this.utils.emit("blur")}})),o||(o=new c({state:{wasReady:0},utils:null,"webView:didCommitNavigation:":function(e){this.utils.emit("will-navigate",{},String(String(e.URL())))},"webView:didStartProvisionalNavigation:":function(){this.utils.emit("did-start-navigation"),this.utils.emit("did-start-loading")},"webView:didReceiveServerRedirectForProvisionalNavigation:":function(){this.utils.emit("did-get-redirect-request")},"webView:didFailProvisionalNavigation:withError:":function(e,t,n){this.utils.emit("did-fail-load",n)},"webView:didFinishNavigation:":function(){0==this.state.wasReady&&(this.state.wasReady=1,this.utils.emitBrowserEvent("ready-to-show")),this.utils.emit("did-navigate"),this.utils.emit("did-frame-navigate"),this.utils.emit("did-stop-loading"),this.utils.emit("did-finish-load"),this.utils.emit("did-frame-finish-load")},"webViewWebContentProcessDidTerminate:":function(){this.utils.emit("dom-ready")}})),i||(i=new c({utils:null,"userContentController:didReceiveScriptMessage:":function(e,t){var n=this.utils.parseWebArguments(String(t.body()));n&&n[0]&&"string"==typeof n[0]&&(n[0]=String(n[0]),this.utils.emit.apply(this,n))}}));var g=s.new({utils:{executeJavaScript(e){d.evaluateJavaScript_completionHandler(e,null)}}}),h=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly("document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('__skpm-"+("undefined"!=typeof MSTheme&&MSTheme.sharedTheme().isDark()?"dark":"light")+"') }, false)",0,!0);d.configuration().userContentController().addUserScript(h),NSApplication.sharedApplication().addObserver_forKeyPath_options_context(g,"effectiveAppearance",NSKeyValueObservingOptionNew,null),NSThread.mainThread().threadDictionary()[e.id+".themeObserver"]=g;var p=o.new({utils:{setTitle:e.setTitle.bind(e),emitBrowserEvent(){try{e.emit.apply(e,arguments)}catch(e){if(void 0===t||!t.listenerCount||!t.listenerCount("uncaughtException"))throw console.error(e),e;t.emit("uncaughtException",e,"uncaughtException")}},emit(){try{e.webContents.emit.apply(e.webContents,arguments)}catch(e){if(void 0===t||!t.listenerCount||!t.listenerCount("uncaughtException"))throw console.error(e),e;t.emit("uncaughtException",e,"uncaughtException")}}},state:{wasReady:0}});d.setNavigationDelegate(p);var m=i.new({utils:{emit(t,n){if(n){for(var a=[],o=2;o<arguments.length;o+=1)a.push(arguments[o]);var i=e.webContents.listeners(n);r.all(i.map((function(e){return r.resolve().then((function(){return e.apply(e,a)}))}))).then((function(e){d.evaluateJavaScript_completionHandler(u.JS_BRIDGE_RESULT_SUCCESS+t+"("+JSON.stringify(e)+")",null)})).catch((function(e){d.evaluateJavaScript_completionHandler(u.JS_BRIDGE_RESULT_ERROR+t+"("+JSON.stringify(e)+")",null)}))}else d.evaluateJavaScript_completionHandler(u.JS_BRIDGE_RESULT_SUCCESS+t+"()",null)},parseWebArguments:l}});d.configuration().userContentController().addScriptMessageHandler_name(m,u.JS_BRIDGE);var y,v={emit(){try{e.emit.apply(e,arguments)}catch(e){if(void 0===t||!t.listenerCount||!t.listenerCount("uncaughtException"))throw console.error(e),e;t.emit("uncaughtException",e,"uncaughtException")}}};f.modal&&((y="Document"===f.parent.type?f.parent.sketchObject:f.parent)&&"MSDocumentData"===String(y.class())&&(y=y.delegate()),v.parentWindow=y.windowForSheet());var S=a.new({utils:v,panel:n});n.setDelegate(S)}}).call(this,n(33),n(14))},function(e,t,n){(function(t,n){var r,a,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===t)return t(e,0);if((r===i||!r)&&t)return r=t,t(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof t?t:i}catch(e){r=i}try{a="function"==typeof n?n:s}catch(e){a=s}}();var l,u=[],d=!1,f=-1;function g(){d&&l&&(d=!1,l.length?u=l.concat(u):f=-1,u.length&&h())}function h(){if(!d){var e=c(g);d=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,d=!1,function(e){if(a===n)return n(e);if((a===s||!a)&&n)return a=n,n(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||d||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}).call(this,n(4).setTimeout,n(4).clearTimeout)},function(module,exports){module.exports=function MochaDelegate(definition,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject),handlers={},ivars={};function setHandlerForSelector(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function(selector,dynamicFunction)}}function setIvar(e,t){var n=e in handlers;if(ivars[e]=t,!n){delegateClassDesc.addInstanceVariableWithName_typeEncoding(e,"@");var r=MOPropertyDescription.new();r.name=e,r.typeEncoding="@",r.weak=!0,r.ivarName=e,delegateClassDesc.addProperty(r)}}this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(e){var t=NSClassFromString(uniqueClassName).new();return Object.keys(ivars).forEach((function(e){t[e]=ivars[e]})),Object.keys(e||{}).forEach((function(n){t[n]=e[n]})),t},this.new=this.getClassInstance,"object"==typeof definition&&Object.keys(definition).forEach((function(e){"function"==typeof definition[e]?setHandlerForSelector(e,definition[e]):setIvar(e,definition[e])})),delegateClassDesc.registerClass()}},function(e,t){e.exports=function(e){var t=null;try{t=JSON.parse(e)}catch(e){}return t&&t.constructor&&t.constructor===Array&&0!=t.length?t:null}},function(e,t){e.exports="file://"+context.plugin.urlForResourceNamed("_webpack_resources/382e82375e9410380a7dc4f1a8818864.html").path()},function(e,t,n){"use strict";n.r(t),n.d(t,"onSelectionChanged",(function(){return Be}));var r,a,o=n(2),i=n(0),s=n.n(i),c=n(7),l=n.n(c),u=n(17),d=n(3),g=n.n(d),h=n(1),p=n.n(h),m=n(18),y=n.n(m),v="user_id",S="subscription-status",b="email",w="plan",C="teamUser",x="teamPlanStatus",T="mp_id",k="optInUsageData",F="https://getstark.co/",N="https://account.getstark.co/",L=("".concat(F,"pricing"),"".concat(F,"support"),"".concat(N,"sign-up"),"".concat(N),"".concat(F,"support/getting-started/using-the-contrast-checker#main"),"".concat(F,"support/getting-started/establishing-focus-order#main"),"".concat(F,"support/getting-started/using-landmarks#main"),"".concat(F,"support/getting-started/using-the-vision-simulator#main"),"".concat(F,"support/getting-started/logging-into-plugins#main"),function(e,t){p.a.setSettingForKey("com.stark.".concat(e),t)}),M=function(e){return p.a.settingForKey("com.stark.".concat(e))},_=function(){var e;return void 0!==M(T)&&""!==M(T)||(e=R(),L(T,e),L(k,!0)),{id:M(v),email:M(b),mp_id:M(T),optInUsageData:M(k),status:M(S),plan:void 0===M(w)||""===M(w)?"":M(w),teamUser:M(C),teamPlanStatus:M(x),contrastFailMessageShown:void 0===M("contrast-fail-message-shown")||""===M("contrast-fail-message-shown")||M("contrast-fail-message-shown"),suggestionsTriesLeft:void 0===M("suggestions-tries-left")||""===M("suggestions-tries-left")?4:M("suggestions-tries-left"),generatorTriesLeft:void 0===M("generator-tries-left")||""===M("generator-tries-left")?3:M("generator-tries-left")}},R=function(){return((new Date).getUTCMilliseconds().toString()+(new Date).getTime().toString()).toString()},I=function(){[v,S,b,w,T,k,C,x].forEach((function(e){L(e,"")}))},E=function(e){L(v,e.id),L(b,e.email),L(S,e.status),L(w,e.plan),L(C,e.teamUser),L(x,e.teamPlanStatus),L(k,e.optInUsageData)},O=function(e){y.a.message(e)},D=function(e){var t="";switch(e){case"Main":t="Main";break;case"Contrast":t="Check Contrast";break;case"Typography":t="Typography";break;case"Alt-Text":t="Alt-Text";break;case"Touch Targets":t="Touch Targets";break;case"Focus Order":t="Focus Order";break;case"Landmarks":t="Landmarks";break;case"Vision":t="Vision Simulator";break;default:t="Main"}return t},A=function(e){console.log("======================="),console.log("======================="),console.log("======================="),console.log("======================="),console.log(e),console.log("======================="),console.log("======================="),console.log("======================="),console.log("=======================")},W=n(3).Group,B=n(3).ShapePath,P=n(3).Style,J=n(3).Rectangle,j=n(3).Text,U=function(e,t,n,r,a){var o=new W({name:"".concat(r.name),parent:a,frame:new J(0,0,260,100)}),i=new B({frame:{x:r.frame.x-12,y:r.frame.y-12,width:260,height:20},type:s.a.Types.ShapePath,name:"Background",shapeType:B.ShapeType.Rectangle,style:{fills:[{color:"#FFFFFF",fillType:P.FillType.Color}],borders:[{color:"##0000001a",fillType:P.FillType.Color,thickness:.5,position:P.BorderPosition.Inside}],shadows:[{color:"#00000040",blur:4,x:0,y:1,spread:0}]},parent:o});i.points.forEach((function(e){return e.cornerRadius=4}));var c=new W({name:"badges",parent:o}),l=new W({name:"left",parent:c}),u=new B({frame:{x:i.frame.x+12,y:i.frame.y+12,width:27,height:20},type:s.a.Types.ShapePath,name:"index background",shapeType:B.ShapeType.Rectangle,style:{fills:[{color:"#381FD1",fillType:P.FillType.Color}],borders:[]},parent:l});u.points[0].cornerRadius=5,u.points[3].cornerRadius=5;var d=new j({type:s.a.Types.Text,name:"index",text:"#".concat(e),style:{fontFamily:"Helvetica",textColor:"#FFFFFF",fontSize:13,fontStyle:"normal",lineHeight:20,kerning:-.08,borders:[]},parent:l});d.fixedWidth=!1,u.frame.width=d.frame.width+8,u.frame.height=20,d.frame.x=u.frame.x+4,d.frame.y=u.frame.y,l.adjustToFit();var f,g=new W({name:"right",parent:c}),h=new B({frame:{x:u.frame.width,y:12,width:27,height:20},type:s.a.Types.ShapePath,name:"status background",shapeType:B.ShapeType.Rectangle,style:{fills:[],borders:[{color:"#0000001a",fillType:P.FillType.Color,thickness:1,position:P.BorderPosition.Inside}]},parent:g});h.points[1].cornerRadius=5,h.points[2].cornerRadius=5,f="written"===t||"decorative"===t?'<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.89355 9.94531C4.21045 9.94531 4.45752 9.82178 4.62939 9.56396L9.65674 1.78662C9.78564 1.59326 9.83398 1.42139 9.83398 1.25488C9.83398 0.830566 9.52246 0.524414 9.0874 0.524414C8.78662 0.524414 8.604 0.631836 8.42139 0.921875L3.87207 8.12988L1.54102 5.17578C1.36377 4.95557 1.18115 4.85889 0.917969 4.85889C0.477539 4.85889 0.160645 5.17041 0.160645 5.6001C0.160645 5.78809 0.225098 5.96533 0.380859 6.15332L3.16309 9.58008C3.36719 9.83252 3.59277 9.94531 3.89355 9.94531Z" fill="#381FD1" /></svg>':"to-do"===t?'<svg width="10" height="2" viewBox="0 0 10 2" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.14355 1.82031H8.85107C9.21631 1.82031 9.5332 1.50879 9.5332 1.12744C9.5332 0.751465 9.21631 0.43457 8.85107 0.43457H1.14355C0.789062 0.43457 0.461426 0.751465 0.461426 1.12744C0.461426 1.50879 0.789062 1.82031 1.14355 1.82031Z" fill="rgba(0,0,0,0.95)" /></svg>':'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.88037 11.332H10.125C11.0811 11.332 11.7041 10.6123 11.7041 9.74756C11.7041 9.48438 11.6343 9.21582 11.4946 8.96875L7.36426 1.76074C7.05811 1.23438 6.53711 0.96582 6 0.96582C5.46289 0.96582 4.93652 1.23975 4.63574 1.76074L0.505371 8.97412C0.365723 9.22119 0.295898 9.48438 0.295898 9.74756C0.295898 10.6123 0.918945 11.332 1.88037 11.332ZM2.03613 10.188C1.72998 10.188 1.52588 9.94092 1.52588 9.66162C1.52588 9.58105 1.53662 9.48438 1.58496 9.39844L5.5542 2.43213C5.65088 2.26562 5.82812 2.19043 6 2.19043C6.17188 2.19043 6.34375 2.26562 6.44043 2.4375L10.4097 9.40381C10.458 9.48975 10.4795 9.58643 10.4795 9.66162C10.4795 9.94092 10.2646 10.188 9.96387 10.188H2.03613ZM6.00537 7.54541C6.31689 7.54541 6.50488 7.36816 6.51562 7.03516L6.59619 4.59668C6.6123 4.25293 6.35449 4.01123 6 4.01123C5.63477 4.01123 5.3877 4.25293 5.40381 4.59131L5.479 7.04053C5.49512 7.36816 5.67773 7.54541 6.00537 7.54541ZM6.00537 9.3501C6.37061 9.3501 6.66602 9.09766 6.66602 8.73779C6.66602 8.37793 6.37598 8.12549 6.00537 8.12549C5.62939 8.12549 5.33398 8.3833 5.33398 8.73779C5.33398 9.09766 5.63477 9.3501 6.00537 9.3501Z" fill="#BA1C1C" /></svg>';var p=s.a.createLayerFromData(f,"svg");p.parent=g,p.frame.x=l.frame.x+l.frame.width+5,p.frame.y=l.frame.y+p.frame.height/2;var m=new j({type:s.a.Types.Text,name:"status",text:"".concat(t.charAt(0).toUpperCase()+t.slice(1)),style:{fontFamily:"Helvetica",textColor:"written"===t||"decorative"===t||"to-do"===t?"#000000f2":"#BA1C1C",fontSize:13,fontStyle:"normal",lineHeight:20,kerning:-.08,borders:[]},parent:g});m.fixedWidth=!1,h.frame.width=p.frame.width+m.frame.width+19,h.frame.height=20,h.frame.x=l.frame.x+l.frame.width-1,h.frame.y=l.frame.y,m.frame.x=p.frame.x+p.frame.width+5,m.frame.y=h.frame.y,g.adjustToFit(),c.adjustToFit();var y=new W({name:"alt-text",parent:o}),v=new j({type:s.a.Types.Text,name:"alt-text",text:"".concat(n),style:{fontFamily:"Helvetica",textColor:"#000000f2",fontSize:13,fontStyle:"normal",kerning:-.08,lineHeight:20,borders:[],alignment:j.Alignment.left},parent:y});return v.frame.width=234,v.fixedWidth=!0,v.frame.x=i.frame.x+12,v.frame.y=i.frame.y+40,y.adjustToFit(),o.adjustToFit(),i.frame.height=o.frame.height+12,o.adjustToFit(),o},z=n(3).Style,H=n(3),K=function(e){return"Page"===e.type||"Group"===e.type||"SymbolInstance"===e.type||"SymbolMaster"===e.type||"Artboard"===e.type},V=function(e){return"SymbolInstance"===e.type},G=function(e){return"Artboard"===e.type||"Shape"===e.type||"ShapePath"===e.type||"Image"===e.type||"Text"===e.type},q=function(e){var t=!1;return G(e)&&("Artboard"===e.type||e.style.fills)&&(t=!0),t},Z=function(e){return H.find("Text",e).filter((function(e){return Y([e]).length>0}))},X=function(e){var t=[],n=H.find("Artboard",e),r=H.find("Shape",e),a=H.find("ShapePath",e),o=H.find("Image",e);return(t=t.concat(n,r,a,o)).filter((function(e){return Y([e]).length>0}))},Y=function(e){var t=[];return e.forEach((function(e){if(G(e))if("Artboard"===e.type)e.background?t.push(Object(o.ConvertHexToRgba)(e.background.color)):t.push({r:255,g:255,b:255,a:1});else if("Shape"===e.type||"ShapePath"===e.type||"Image"===e.type)e.style.fills.forEach((function(e){e.fillType===z.FillType.Color&&t.push(Object(o.ConvertHexToRgba)(e.color))}));else if("Text"===e.type)if(e.style.fills.length>0)e.style.fills.forEach((function(e){e.fillType===z.FillType.Color&&t.push(Object(o.ConvertHexToRgba)(e.color))}));else{var n=e.sketchObject.textColor();t.push({r:255*n.red(),g:255*n.green(),b:255*n.blue(),a:n.alpha()})}})),t},$=function(e,t){var n=[];return function e(r){if(K(r)&&!V(r))r.layers.forEach((function(t){K(t)?e(t):n.push(t)}));else if(V(r)&&t){var a=r.detach({recursively:!0});e(a)}else V(r)&&(a=r.master,e(a))}(e),n},Q=function(e){var t;return function e(n){if(n.parent&&q(n.parent))t=n.parent;else{if("Page"===n.parent.type)return;e(n.parent)}}(e),t},ee=function(){var e=s.a.getSelectedDocument(),t=e.selectedPage,n=e.selectedLayers.layers,r={bgLayer:t,fgLayer:t};try{return 1===n.length?function(e){var t=s.a.getSelectedDocument().selectedPage,n={bgLayer:t,fgLayer:t};try{if(K(e)){var r=Z(e),a=X(e);r.length>0?(n.fgLayer=r[0],0===a.length?n.bgLayer=Q(r[0]):n.bgLayer=a[0]):a.length>0&&(n.fgLayer=a[0],a.length>1&&(n.bgLayer=a[1]))}else n.bgLayer=Q(e),q(e)&&(n.fgLayer=e);return n}catch(e){return A(e),n}}(n[0]):2===n.length?function(e){var t=s.a.getSelectedDocument().selectedPage,n={bgLayer:t,fgLayer:t};if("Text"===e[0].type){if(n.fgLayer=e[0],q(e[1]))n.bgLayer=e[1];else if(K(e[1])){var r=X(e[1]);r.length>0&&(n.bgLayer=r[0])}}else if("Text"===e[1].type){if(n.fgLayer=e[1],q(e[0]))n.bgLayer=e[0];else if(K(e[0])){var a=X(e[0]);a.length>0&&(n.bgLayer=a[0])}}else if(q(e[0])){if(n.fgLayer=e[0],q(e[1]))n.bgLayer=e[1];else if(K(e[1])){var o=X(e[1]);o.length>0&&(n.bgLayer=o[0])}}else if(q(e[1])){if(n.bgLayer=e[1],q(e[0]))n.bgLayer=e[0];else if(K(e[0])){var i=X(e[0]);i.length>0&&(n.bgLayer=i[0])}}else if(K(e[0])){var c=Z(e[0]),l=X(e[0]),u=X(e[1]);c.length>0?(n.fgLayer=c[0],u.length>0?n.bgLayer=u[0]:l.length>0&&(n.bgLayer=l[0])):u.length>0?n.fgLayer=u[0]:l.length>0&&(n.bgLayer=l[0])}else if(K(e[1])){var d=Z(e[1]),f=X(e[1]),g=X(e[0]);d.length>0?(n.fgLayer=d[0],g.length>0?n.bgLayer=g[0]:f.length>0&&(n.bgLayer=f[0])):g.length>0?n.fgLayer=g[0]:f.length>0&&(n.bgLayer=f[0])}return n}(n):function(e){var t=s.a.getSelectedDocument().selectedPage,n={bgLayer:t,fgLayer:t},r=[];if(e.every((function(e){if(r.length>0)return!1;if("Text"===e.type&&q(e))r.push(e);else if(K(e)){var t=$(e,!1);t.length>0&&t.forEach((function(e){"Text"===e.type&&q(e)&&r.push(e)}))}return!0})),r.length>0){n.fgLayer=r[0];var a=[];e.every((function(e){if(a.length>0)return!1;if("Text"!==e.type&&q(e))a.push(e);else if(K(e)){var t=$(e,!1);t.length>0&&t.forEach((function(t){"Text"!==e.type&&q(t)&&a.push(t)}))}return!0})),a.length>0&&(n.bgLayer=a[0])}else{var o=[];e.forEach((function(e){if("Text"!==e.type&&q(e))o.push(e);else if(K(e)){var t=$(e,!1);t.length>0&&t.forEach((function(t){"Text"!==e.type&&q(t)&&o.push(t)}))}return!0})),1===o.length?n.fgLayer=o[0]:o.length>1&&(n.fgLayer=o[0],n.bgLayer=o[1])}return n}(n)}catch(e){return A(e),r}},te=function(){try{var e=ee(),t=Y([e.bgLayer]),n=Y([e.fgLayer]),r=t[0],a=r,i=n[0],s=i;return r.a<1&&(a=Object(o.MixColors)(i,r)),i.a<1&&(s=Object(o.MixColors)(r,i)),{backgroundLayer:e.bgLayer,originalBgColor:r,normalizedBgColor:a,foregroundLayer:e.fgLayer,originalFgColor:i,normalizedFgColor:s}}catch(e){A(e)}},ne=function(e){return"#".concat(Object(o.ConvertRgbaToHex)(e).toUpperCase()," / rgba(").concat(Math.floor(e.r),", ").concat(Math.floor(e.g),", ").concat(Math.floor(e.b),", ").concat(Math.floor(e.a),")")},re=function(){var e=[],t=[];s.a.getSelectedDocument().selectedLayers.layers.forEach((function(e){if(K(e)){var n=$(e,!0);t=t.concat(n)}else t.push(e)}));var n=Y(t),r=n.map((function(e){return Object(o.ConvertRgbaToRgbaString)(e)}));return n.filter((function(e,t){return!r.includes(Object(o.ConvertRgbaToRgbaString)(e),t+1)})).forEach((function(t){e.push({name:ne(t),color:t})})),e},ae=function(){var e=[],t=re();t.length>0&&e.push({name:"Selection Colors",subgroups:[{name:"",colors:t}]});var n=function(){var e=[],t=s.a.getSelectedDocument().colors;return t&&t.length>0&&t.forEach((function(t){var n,r={name:null==t||null===(n=t.name)||void 0===n?void 0:n.replace("'",""),color:Object(o.ConvertHexToRgba)(t.color)};e.push(r)})),e}();n.length>0&&e.push({name:"Document Color Assets",subgroups:[{name:"",colors:n}]});var r=function(){var e=[],t=s.a.getSelectedDocument().swatches;return t&&t.length>0&&t.forEach((function(t){var n,r={name:null==t||null===(n=t.name)||void 0===n?void 0:n.replace("'",""),color:Object(o.ConvertHexToRgba)(t.color)};e.push(r)})),e}();r.length>0&&e.push({name:"Document Swatches",subgroups:[{name:"",colors:r}]});var a=function(){var e=[],t=s.a.getSelectedDocument().sharedLayerStyles;return t&&t.length>0&&t.forEach((function(t){if(t.style.fills.length>0&&t.style.fills[0].fillType===z.FillType.Color){var n,r,a={name:null==t||null===(n=t.style)||void 0===n||null===(r=n.name)||void 0===r?void 0:r.replace("'",""),color:Object(o.ConvertHexToRgba)(t.style.fills[0].color)};e.push(a)}else if(t.textColor){var i,s,c={name:null==t||null===(i=t.style)||void 0===i||null===(s=i.name)||void 0===s?void 0:s.replace("'",""),color:Object(o.ConvertHexToRgba)(t.textColor)};e.push(c)}})),e}();a.length>0&&e.push({name:"Document Styles",subgroups:[{name:"",colors:a}]});var i=function(){var e=[],t=s.a.globalAssets.colors;return t&&t.length>0&&t.forEach((function(t){var n,r={name:null==t||null===(n=t.name)||void 0===n?void 0:n.replace("'",""),color:Object(o.ConvertHexToRgba)(t.color)};e.push(r)})),e}();i.length>0&&e.push({name:"Global Color Assets",subgroups:[{name:"",colors:i}]});var c=function(){var e=[],t=s.a.globalAssets.swatches;return t&&t.length>0&&t.forEach((function(t){var n,r={name:null==t||null===(n=t.name)||void 0===n?void 0:n.replace("'",""),color:Object(o.ConvertHexToRgba)(t.color)};e.push(r)})),e}();c.length>0&&e.push({name:"Global Swatches",subgroups:[{name:"",colors:c}]});var l=function(){var e=[],t=s.a.getSelectedDocument().selectedPage,n=$(t);if(n&&n.length>0){var r=Y(n);if(r&&r.length>0){var a=r.map((function(e){return Object(o.ConvertRgbaToRgbaString)(e)}));r.filter((function(e,t){return!a.includes(Object(o.ConvertRgbaToRgbaString)(e),t+1)})).forEach((function(t){var n={name:ne(t),color:t};e.push(n)}))}}return e}();return l.length>0&&e.push({name:"Page Colors",subgroups:[{name:"",colors:l}]}),e},oe=function(e,t){if("Text"===t.type){var n=MSImmutableColor.colorWithSVGString_(e),r=MSColor.alloc().initWithImmutableObject_(n);t.sketchObject.setTextColor(r)}else"Artboard"===t.type?(t.background.enabled=!0,t.background.color=e):t.style.fills=[{color:e,fillType:z.FillType.Color}]},ie=n(3).Style,se=function(e,t){var n=Object(o.ConvertHexToRgba)(e);return Object(o.ConvertRgbaToRgbaString)(Object(o.SimulateColorblindness)(n,t))},ce=function(e,t){e.forEach((function(e){if(e.fillType===ie.FillType.Color){var n=se(e.color,t);e.color=n}else e.fillType===ie.FillType.Gradient&&e.gradient.stops.forEach((function(e){var n=se(e.color,t);e.color=n}))}))},le=function(e){var t;return e.selectedLayers.layers.forEach((function(e){t=e.sketchObject.parentArtboard()})),t&&(t=t.objectID()),t},ue=function(e){return s.a.export(e,{scales:"2",formats:"png",output:!1}).toString("base64")},de=function(e){return{width:2*e.frame.width,height:2*e.frame.height}},fe=n(3).Group,ge=n(3).ShapePath,he=n(3).Style,pe=n(3).Rectangle,me=n(3).Text,ye=function(e,t){return new fe({name:e,parent:t,locked:!0})},ve=function(e,t,n){var r=new pe(0,0,24,24),a=new fe({name:"".concat(e," - ").concat(t.name),parent:n,frame:new pe(0,0,100,100)}),o=(new ge({frame:{x:12,y:12,width:t.frame.width,height:t.frame.height},type:s.a.Types.ShapePath,name:"Dotted Line",shapeType:ge.ShapeType.Rectangle,style:{borders:[{color:"#4B4B4E",fillType:he.FillType.Color,thickness:2}],borderOptions:{dashPattern:[4,2]}},parent:a}),new ge({frame:r,type:s.a.Types.ShapePath,name:"Circle",shapeType:ge.ShapeType.Oval,style:{fills:[{color:"#381FD1",fillType:he.FillType.Color}],borders:[{color:"#FFFFFF",fillType:he.FillType.Color,thickness:2}],shadows:[{color:"#00000022",blur:5,x:2,y:3,spread:1}]},parent:a})),i=new me({type:s.a.Types.Text,name:"Number",text:"".concat(e),style:{fontFamily:"Helvetica",textColor:"#FFFFFF",fontSize:16,fontWeight:8,borders:[]},parent:a});i.frame.x=(o.frame.width-i.frame.width)/2,i.frame.y=(o.frame.height-i.frame.height)/2;var c=new pe(0,0,100,100).changeBasis({from:t,to:t.getParentArtboard()});return a.adjustToFit(),Se(a,c.x-12,c.y-12),a},Se=function(e,t,n){var r=function(e){for(var t={x:0,y:0},n=e.parent;n.name&&"Artboard"!==n.type;)t.x+=n.frame.x,t.y+=n.frame.y,n=n.parent;return t}(e),a=new s.a.Rectangle(e.frame);a.x=t-r.x,a.y=n-r.y,e.frame=a,be(e)},be=function(e){for(var t=e.parent;t&&t.name&&"Artboard"!==t.type;)t.adjustToFit(),t=t.parent},we=n(3).Group,Ce=n(3).ShapePath,xe=n(3).Style,Te=n(3).Rectangle,ke=n(3).Text,Fe=function(e,t,n){var r=_e(e),a=Me(e),o=new Te(0,0,a,20),i=new we({name:"".concat(e," - ").concat(t.name),parent:n,frame:new Te(0,0,100,100)});new Ce({frame:{x:12,y:12,width:t.frame.width+24,height:t.frame.height+24},type:s.a.Types.ShapePath,name:"Solid Line",shapeType:Ce.ShapeType.Rectangle,style:{borders:[{color:"#FFFFFF",fillType:xe.FillType.Color,thickness:2}]},parent:i}).points.forEach((function(e){return e.cornerRadius=8})),new Ce({frame:{x:12,y:12,width:t.frame.width+24,height:t.frame.height+24},type:s.a.Types.ShapePath,name:"Dotted Line",shapeType:Ce.ShapeType.Rectangle,style:{borders:[{color:r.textColor,fillType:xe.FillType.Color,thickness:2}],borderOptions:{dashPattern:[4,2]}},parent:i}).points.forEach((function(e){return e.cornerRadius=8}));var c=new Ce({frame:o,type:s.a.Types.ShapePath,name:"Rectangle",shapeType:Ce.ShapeType.Rectangle,style:{fills:[{color:r.bgColor,fillType:xe.FillType.Color}],borders:[{color:"#FFFFFF",fillType:xe.FillType.Color,thickness:2}]},parent:i});c.points.forEach((function(e){return e.cornerRadius=2}));var l=new ke({type:s.a.Types.Text,name:"Type",text:"".concat(e),style:{fontFamily:"Helvetica",textColor:r.textColor,fontSize:12,fontStyle:"normal",fontWeight:8,lineHeight:12,borders:[]},parent:i});c.frame.x=t.frame.width+24-(a-6),c.frame.y=18,l.sketchObject.setTextBehaviour(2),l.style.verticalAlignment=ke.VerticalAlignment.center,l.style.alignment=ke.Alignment.center,l.style.kerning=null,l.frame.width=c.frame.width,l.frame.height=c.frame.height,l.frame.x=t.frame.width+24-(a-6),l.frame.y=18;var u=new Te(0,0,100,100).changeBasis({from:t,to:t.getParentArtboard()});return i.adjustToFit(),Ne(i,u.x-12,u.y-12),i},Ne=function(e,t,n){var r=function(e){for(var t={x:0,y:0},n=e.parent;n.name&&"Artboard"!==n.type;)t.x+=n.frame.x,t.y+=n.frame.y,n=n.parent;return t}(e),a=new s.a.Rectangle(e.frame);a.x=t-r.x,a.y=n-r.y,e.frame=a,Le(e)},Le=function(e){for(var t=e.parent;t&&t.name&&"Artboard"!==t.type;)t.adjustToFit(),t=t.parent},Me=function(e){var t;switch(e){case"Aside":t=44;break;case"Main":t=39;break;case"Footer":t=50;break;case"Nav":t=34;break;case"Form":t=42;break;case"Section":t=56;break;case"Header":t=54}return t},_e=function(e){var t;switch(e){case"Aside":t={bgColor:"#E5DDC3",textColor:"#56430C"};break;case"Main":t={bgColor:"#EBD7EA",textColor:"#6B2E66"};break;case"Footer":t={bgColor:"#CDE0E8",textColor:"#254961"};break;case"Nav":t={bgColor:"#CFE3C1",textColor:"#214F03"};break;case"Form":t={bgColor:"#ECD8DA",textColor:"#762E2E"};break;case"Section":t={bgColor:"#C3E5D5",textColor:"#0A502B"};break;case"Header":t={bgColor:"#DDDAEC",textColor:"#3E4073"}}return t};function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie,Ee,Oe,De,Ae={defaultSelectedMenuItem:"Main",defaultTool:"Main",defaultColorFormat:"hex",showErrorState:!0,contrastRatio:0,backgroundColor:{r:255,g:255,b:255,a:1},foregroundColor:{r:255,g:255,b:255,a:1},colorGroups:[],hasText:!1,touchTargetDimensions:{width:0,height:0},sequences:[],currentSequence:null,focusItems:[],altTextArtboards:[],landmarkArtboards:[],artboardNames:[],subscription:{}},We=!0;function Be(e){var t=Object(u.getWebview)("stark.main"),n=_();if(Ae.subscription=n,t&&t.isVisible()&&"Check Contrast"===t.getTitle()){var r=s.a.getSelectedDocument().selectedLayers.layers,a=ae();if(Ae.colorGroups=a,0===r.length)Ae.showErrorState=!0,Ae.backgroundColor={r:255,g:255,b:255,a:1},Ae.foregroundColor={r:255,g:255,b:255,a:1};else{var i=te();Ae.contrastRatio=Object(o.GetContrastRatio)(i.normalizedBgColor,i.normalizedFgColor,!0),Ae.backgroundColor=i.originalBgColor,Ae.foregroundColor=i.originalFgColor,Ae.showErrorState=!1,Ie=i.backgroundLayer,Ee=i.foregroundLayer}t.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)}else if(t&&t.isVisible()&&"Touch Targets"===t.getTitle()){var c=s.a.getSelectedDocument().selectedLayers;c.isEmpty?(Ae.touchTargetDimensions={width:0,height:0},O("Select a layer to check touch targets.")):1===c.length?Ae.touchTargetDimensions={width:Math.trunc(c.layers[0].frame.width),height:Math.trunc(c.layers[0].frame.height)}:(Ae.touchTargetDimensions={width:0,height:0},O("Too many layers to check touch targets against.")),t.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)}}t.default=function(){De=_();var e=M("stark_default_tool"),t=M("stark_default_color_format"),i=(r=new l.a({identifier:"stark.main",frame:!1,height:473,width:360,resizable:!1,hidesOnDeactivate:!0,alwaysOnTop:!0,remembersWindowFrame:!0,acceptsFirstMouse:!0,title:"Main",backgroundColor:"#FFF",show:!1})).webContents;if(Ae.subscription=De,t&&(Ae.defaultColorFormat=t),e){var c,u,d,g,h,m,y,F=D(e);Ae.defaultTool=e,(null===(c=De)||void 0===c||null===(u=c.plan)||void 0===u?void 0:u.startsWith("PRO"))&&("active"===(null===(d=De)||void 0===d?void 0:d.status)||"trialing"===(null===(g=De)||void 0===g?void 0:g.status))||(null===(h=De)||void 0===h?void 0:h.teamUser)&&("active"===(null===(m=De)||void 0===m?void 0:m.teamPlanStatus)||"trialing"===(null===(y=De)||void 0===y?void 0:y.teamPlanStatus))||"Check Contrast"===F||"Vision Simulator"===F||"Landmarks"===F||"Main"===F?(Ae.defaultSelectedMenuItem=F,Oe=F,Pe(F)):(Ae.defaultSelectedMenuItem="Upgrade",Oe="Upgrade",Pe("Account"))}r.once("ready-to-show",(function(){r.show()})),i.on("did-finish-load",(function(){i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("validationSuccessful",(function(e){E(e)})),i.on("validationFailed",(function(){I()})),i.on("minMaxButtonClicked",(function(){var e=r.getBounds().height;40==e?Je("Vision Simulator"===Oe?448:360,a):(a=e,Je("Vision Simulator"===Oe?448:360,40))})),i.on("cancelButtonClicked",(function(){r.close()})),i.on("menuItemClicked",(function(e){Oe=e,Pe(e)})),i.on("urlClicked",(function(e){!function(e){var t=NSURL.URLWithString(e);NSWorkspace.sharedWorkspace().openURL(t)}(e)})),i.on("messageReceived",(function(e){var t=s.a.getSelectedDocument(),n=JSON.parse(e),r=t.getLayerWithID(n.layerId);r&&oe(Object(o.ConvertRgbaToHex)(n.value,!0,!0),r).catch(console.error)})),i.on("handleExpandCollapseClick",(function(){We?(Je(360,471),We=!1):(Je(360,651),We=!0)})),i.on("contrastUpdateButtonClicked",(function(e){var t=JSON.parse(e);oe(Object(o.ConvertRgbaToHex)(t.background,!0,!0),Ie),oe(Object(o.ConvertRgbaToHex)(t.foreground,!0,!0),Ee),Ae.backgroundColor=t.background,Ae.foregroundColor=t.foreground;var n=re();n.length>0&&Ae.colorGroups.length>0?"Selection Colors"===Ae.colorGroups[0].name?Ae.colorGroups[0].subgroups[0].colors=n:Ae.colorGroups.unshift({name:"Selection Colors",subgroups:[{name:"",colors:n}]}):"Selection Colors"===Ae.colorGroups[0].name&&Ae.colorGroups.shift(),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("colorBgChange",(function(e){var t=JSON.parse(e).bgColor;Ae.backgroundColor=t,Ae.showErrorState=!1,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("colorFgChange",(function(e){var t=JSON.parse(e).fgColor;Ae.foregroundColor=t,Ae.showErrorState=!1,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("typographyItemClick",(function(e){var t=JSON.parse(e),n=s.a.getSelectedDocument(),r=n.getLayerWithID(t.layerId);n.centerOnLayer(r)})),i.on("applyFontSizeChange",(function(e){var t=JSON.parse(e);s.a.getSelectedDocument().getLayerWithID(t.layerId).style.fontSize=t.fontSize})),i.on("addAltTextItem",(function(e){try{var t,n=JSON.parse(e),r=function(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Ae.altTextArtboards);if(n.layerId&&r.forEach((function(e){t=e.altTexts.find((function(e){return e.layerId===n.layerId}))})),t)t.text=n.text,t.status=n.status,function(e,t,n){var r=s.a.getSelectedDocument().getLayerWithID(e);if(r){var a=r.layers[2],o=r.layers[1],i=r.layers[0];o.layers[1].remove();var c,l=o.layers[0],u=new W({name:"right",parent:o}),d=new B({frame:{x:l.frame.width,y:12,width:27,height:20},type:s.a.Types.ShapePath,name:"status background",shapeType:B.ShapeType.Rectangle,style:{fills:[],borders:[{color:"#0000001a",fillType:P.FillType.Color,thickness:1,position:P.BorderPosition.Inside}]},parent:u});d.points[1].cornerRadius=5,d.points[2].cornerRadius=5,c="written"===n||"decorative"===n?'<svg width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.89355 9.94531C4.21045 9.94531 4.45752 9.82178 4.62939 9.56396L9.65674 1.78662C9.78564 1.59326 9.83398 1.42139 9.83398 1.25488C9.83398 0.830566 9.52246 0.524414 9.0874 0.524414C8.78662 0.524414 8.604 0.631836 8.42139 0.921875L3.87207 8.12988L1.54102 5.17578C1.36377 4.95557 1.18115 4.85889 0.917969 4.85889C0.477539 4.85889 0.160645 5.17041 0.160645 5.6001C0.160645 5.78809 0.225098 5.96533 0.380859 6.15332L3.16309 9.58008C3.36719 9.83252 3.59277 9.94531 3.89355 9.94531Z" fill="#381FD1" /></svg>':"to-do"===n?'<svg width="10" height="2" viewBox="0 0 10 2" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.14355 1.82031H8.85107C9.21631 1.82031 9.5332 1.50879 9.5332 1.12744C9.5332 0.751465 9.21631 0.43457 8.85107 0.43457H1.14355C0.789062 0.43457 0.461426 0.751465 0.461426 1.12744C0.461426 1.50879 0.789062 1.82031 1.14355 1.82031Z" fill="rgba(0,0,0,0.95)" /></svg>':'<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.88037 11.332H10.125C11.0811 11.332 11.7041 10.6123 11.7041 9.74756C11.7041 9.48438 11.6343 9.21582 11.4946 8.96875L7.36426 1.76074C7.05811 1.23438 6.53711 0.96582 6 0.96582C5.46289 0.96582 4.93652 1.23975 4.63574 1.76074L0.505371 8.97412C0.365723 9.22119 0.295898 9.48438 0.295898 9.74756C0.295898 10.6123 0.918945 11.332 1.88037 11.332ZM2.03613 10.188C1.72998 10.188 1.52588 9.94092 1.52588 9.66162C1.52588 9.58105 1.53662 9.48438 1.58496 9.39844L5.5542 2.43213C5.65088 2.26562 5.82812 2.19043 6 2.19043C6.17188 2.19043 6.34375 2.26562 6.44043 2.4375L10.4097 9.40381C10.458 9.48975 10.4795 9.58643 10.4795 9.66162C10.4795 9.94092 10.2646 10.188 9.96387 10.188H2.03613ZM6.00537 7.54541C6.31689 7.54541 6.50488 7.36816 6.51562 7.03516L6.59619 4.59668C6.6123 4.25293 6.35449 4.01123 6 4.01123C5.63477 4.01123 5.3877 4.25293 5.40381 4.59131L5.479 7.04053C5.49512 7.36816 5.67773 7.54541 6.00537 7.54541ZM6.00537 9.3501C6.37061 9.3501 6.66602 9.09766 6.66602 8.73779C6.66602 8.37793 6.37598 8.12549 6.00537 8.12549C5.62939 8.12549 5.33398 8.3833 5.33398 8.73779C5.33398 9.09766 5.63477 9.3501 6.00537 9.3501Z" fill="#BA1C1C" /></svg>';var f=s.a.createLayerFromData(c,"svg");f.parent=u,f.frame.x=l.frame.x+l.frame.width+5,f.frame.y=l.frame.y+f.frame.height/2;var g=new j({type:s.a.Types.Text,name:"status",text:"".concat(n.charAt(0).toUpperCase()+n.slice(1)),style:{fontFamily:"Helvetica",textColor:"written"===n||"decorative"===n||"to-do"===n?"#000000f2":"#BA1C1C",fontSize:13,fontStyle:"normal",lineHeight:20,kerning:-.08,borders:[]},parent:u});g.fixedWidth=!1,d.frame.width=f.frame.width+g.frame.width+19,d.frame.height=20,d.frame.x=l.frame.x+l.frame.width-1,d.frame.y=l.frame.y,g.frame.x=f.frame.x+f.frame.width+5,g.frame.y=d.frame.y,u.adjustToFit(),o.adjustToFit(),a.layers[0].text="".concat(t),a.adjustToFit(),r.adjustToFit(),i.frame.height!==r.frame.height&&(i.frame.height=r.frame.height+12),r.adjustToFit();var h=p.a.layerSettingForKey(r,"stark-alt-text-item");p.a.setLayerSettingForKey(r,"stark-alt-text-item",{layerId:h.layerId,name:h.name,status:n,text:t})}}(t.layerId,t.text,t.status);else{var a=function(e,t){var n,r=s.a.getSelectedDocument(),a=r.selectedLayers;if(a.isEmpty)O("Please select a layer to attach alt-text to.");else if(a.length>1)O("Alt-text can only be attached to one layer or group.");else{var o,i=a.layers[0].getParentArtboard(),c=p.a.layerSettingForKey(i,"stark-alt-text-main-group"),l=r.getLayerWithID(c);if(l)o=U(l.layers.length+1,e,t,a.layers[0],l);else{l=function(e){return new W({name:"Stark Alt-Texts",parent:e})}(i),o=U(1,e,t,a.layers[0],l),p.a.setLayerSettingForKey(i,"stark-alt-text-main-group",l.id);var u=p.a.documentSettingForKey(r,"stark-alt-text-artboards");u||(u=[]),u.push(i.id),p.a.setDocumentSettingForKey(r,"stark-alt-text-artboards",u)}o.moveToBack(),p.a.setLayerSettingForKey(o,"stark-alt-text-item",{layerId:o.id,name:a.layers[0].name,status:e,text:t}),n={artboardId:i.id,artboardName:i.name,layerId:o.id,layerName:a.layers[0].name,name:a.layers[0].name,status:e,text:t}}return n}(n.status,n.text);if(a&&a.artboardId){var o=Ae.altTextArtboards.find((function(e){return e.artboardId===a.artboardId}));o?o.altTexts.push({name:a.name,status:a.status,text:a.text,layerId:a.layerId,layerName:a.layerName}):Ae.altTextArtboards.push({artboardId:a.artboardId,artboardName:a.artboardName,altTexts:[{name:a.name,status:a.status,text:a.text,layerId:a.layerId,layerName:a.layerName}]})}}i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)}catch(e){A(e)}})),i.on("deleteAltTextItem",(function(e){var t=JSON.parse(e).layerId;!function(e){var t=s.a.getSelectedDocument(),n=t.getLayerWithID(e),r=n.parent,a=r.layers.length;if(1===a){var o=p.a.documentSettingForKey(t,"stark-alt-text-artboards"),i=o.findIndex((function(e){return e===r.id}));o.splice(i,1),p.a.setDocumentSettingForKey(t,"stark-alt-text-artboards",o)}n.remove(),1===a&&r.remove()}(t),Ae.altTextArtboards.forEach((function(e){var n=e.altTexts.findIndex((function(e){return e.layerId===t}));n>-1&&e.altTexts.splice(n,1)}));var n=Ae.altTextArtboards.findIndex((function(e){return e.altTexts.length<1}));n>-1&&Ae.altTextArtboards.splice(n,1),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("createSequence",(function(e){var t=JSON.parse(e);Ae.sequences.find((function(e){return e.name===t.name}))?O("Sequence names must be unique."):(Ae.currentSequence={id:t.name,name:t.name},Ae.sequences.push(Ae.currentSequence),Ae.focusItems=[],i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error))})),i.on("selectSequence",(function(e){var t=JSON.parse(e),n=Ae.sequences[t.index].id,r=function(e){var t=s.a.getSelectedDocument(),n=t.getLayerWithID(e),r=[];return n.layers.forEach((function(e,a){var o=p.a.layerSettingForKey(e,"stark-fo-item"),i=t.getLayerWithID(o.id),s=i.layers[i.layers.length-1];s.text!=n.layers.length-a&&(i.name="".concat(n.layers.length-a," - ").concat(o.name),s.text="".concat(n.layers.length-a)),o&&r.push({associatedId:o.associatedId,id:o.id,name:o.name})})),r.reverse(),r}(n);Ae.currentSequence={id:n,name:t.name},Ae.focusItems=r,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("moveSequence",(function(e){var t=JSON.parse(e);!function(e,t,n,r){var a=s.a.getSelectedDocument(),o=a.getLayerWithID(e),i=a.getLayerWithID(t);if(o&&i){o.index=i.index;var c=a.getLayerWithID(o.parent.id);if(c){var l=p.a.layerSettingForKey(c,"stark-fo-sequences"),u=l[n];l.splice(n,1),l.splice(r,0,u),p.a.setLayerSettingForKey(c,"stark-fo-sequences",l)}}}(Ae.sequences[t.startingIndex].id,Ae.sequences[t.destinationIndex].id,t.startingIndex,t.destinationIndex);var n=Ae.sequences[t.startingIndex];Ae.sequences.splice(t.startingIndex,1),Ae.sequences.splice(t.destinationIndex,0,n),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("saveNameSequence",(function(e){var t=JSON.parse(e);Ae.sequences.find((function(e){return e.name===t.name}))?O("Sequence names must be unique."):(function(e,t){var n=s.a.getSelectedDocument(),r=n.getLayerWithID(e),a=r.getParentArtboard(),o=p.a.layerSettingForKey(a,"stark-fo-main-group"),i=n.getLayerWithID(o),c=p.a.layerSettingForKey(i,"stark-fo-sequences"),l=c.find((function(t){return t.id===e}));l&&(l.name=t,r.name=t,p.a.setLayerSettingForKey(i,"stark-fo-sequences",c))}(Ae.sequences[t.index].id,t.name),Ae.sequences[t.index].name=t.name,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error))})),i.on("deleteSequence",(function(e){var t=JSON.parse(e),n=Ae.sequences[t.index].id;!function(e,t){var n=s.a.getSelectedDocument(),r=n.getLayerWithID(e),a=r.getParentArtboard(),o=p.a.layerSettingForKey(a,"stark-fo-main-group"),i=n.getLayerWithID(o),c=p.a.layerSettingForKey(i,"stark-fo-sequences");c.splice(t,1),r.remove(),c&&c.length>0&&p.a.setLayerSettingForKey(i,"stark-fo-sequences",c)}(n,t.index),Ae.currentSequence.id===n&&(Ae.items=[]),Ae.sequences.splice(t.index,1),f,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("addFocusItem",(function(){var e=function(e,t){var n,r=s.a.getSelectedDocument(),a=r.selectedLayers;if(a.isEmpty)O("Please select a layer to attach a focus item to.");else if(a.length>1)O("A focus item can only be attached to one layer or group.");else{var o=a.layers[0].getParentArtboard();if(0===e){var i,c=p.a.layerSettingForKey(o,"stark-fo-main-group"),l=r.getLayerWithID(c);if(l){i=ye(t.name,l);var u=p.a.layerSettingForKey(l,"stark-fo-sequences");u.push({id:i.id,name:i.name}),p.a.setLayerSettingForKey(l,"stark-fo-sequences",u)}else{l=function(e){return new fe({name:"Stark Focus Orders",parent:e,locked:!0})}(o),i=ye(t.name,l);var d=p.a.documentSettingForKey(r,"stark-fo-main-groups");d||(d=[]),d.push(l.id),p.a.setDocumentSettingForKey(r,"stark-fo-main-groups",d),p.a.setLayerSettingForKey(o,"stark-fo-main-group",l.id),p.a.setLayerSettingForKey(l,"stark-fo-sequences",[{id:i.id,name:i.name}])}i.moveToBack();var f=ve(e+1,a.layers[0],i);p.a.setLayerSettingForKey(f,"stark-fo-item",{associatedId:a.layers[0].id,id:f.id,name:a.layers[0].name}),n={sequenceId:i.id,id:f.id,name:a.layers[0].name}}else{var g=r.getLayerWithID(t.id);o.id!==g.getParentArtboard().id?O("Unable to add focus item to this sequence since it's on another artboard."):((f=ve(e+1,a.layers[0],g)).moveToBack(),p.a.setLayerSettingForKey(f,"stark-fo-item",{associatedId:a.layers[0].id,id:f.id,name:a.layers[0].name}),n={id:f.id,name:a.layers[0].name})}}return n}(Ae.focusItems.length,Ae.currentSequence);e.sequenceId&&(Ae.sequences.find((function(e){return e.name===Ae.currentSequence.name})).id=e.sequenceId),Ae.focusItems.push({id:e.id,name:e.name}),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("deleteFocusItem",(function(e){var t=JSON.parse(e);!function(e){var t=s.a.getSelectedDocument().getLayerWithID(e),n=t.index,r=t.parent,a=r.layers.length;t.remove(),r.layers.forEach((function(e,t){if(e.index<n){var a=p.a.layerSettingForKey(e,"stark-fo-item");a&&(e.name="".concat(r.layers.length-t," - ").concat(a.name),e.layers[e.layers.length-1].text="".concat(r.layers.length-t))}})),1===a&&r.parent.remove()}(Ae.focusItems[t.index].id),Ae.focusItems.splice(t.index,1),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("saveNameFocusItem",(function(e){var t=JSON.parse(e),n=Ae.focusItems[t.index].id;!function(e,t,n){var r=s.a.getSelectedDocument().getLayerWithID(n);if(r){r.name="".concat(e+1," - ").concat(t);var a=p.a.layerSettingForKey(r,"stark-fo-item");a.name=t,p.a.setLayerSettingForKey(r,"stark-fo-item",a)}}(t.index,t.name,n),Ae.focusItems[t.index].name=t.name,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("moveFocusItem",(function(e){var t=JSON.parse(e);!function(e,t){var n=s.a.getSelectedDocument(),r=n.getLayerWithID(e),a=n.getLayerWithID(t);r.index=a.index,r.parent.layers.forEach((function(e,t){var n=p.a.layerSettingForKey(e,"stark-fo-item");n&&(e.name="".concat(r.parent.layers.length-t," - ").concat(n.name),e.layers[e.layers.length-1].text="".concat(r.parent.layers.length-t))}))}(Ae.focusItems[t.startingIndex].id,Ae.focusItems[t.destinationIndex].id);var n=Ae.focusItems[t.startingIndex];Ae.focusItems.splice(t.startingIndex,1),Ae.focusItems.splice(t.destinationIndex,0,n),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("addLandmarkItem",(function(e){var t=function(e){var t,n=s.a.getSelectedDocument(),r=n.selectedLayers;if(r.isEmpty)O("Please select a layer to attach a landmark to.");else if(r.length>1)O("A landmark can only be attached to one layer or group.");else{var a,o=r.layers[0].getParentArtboard(),i=p.a.layerSettingForKey(o,"stark-landmark-main-group"),c=n.getLayerWithID(i);if(c)a=Fe(e,r.layers[0],c);else{c=function(e){return new we({name:"Stark Landmarks",parent:e,locked:!0})}(o),a=Fe(e,r.layers[0],c),p.a.setLayerSettingForKey(o,"stark-landmark-main-group",c.id);var l=p.a.documentSettingForKey(n,"stark-landmarks-artboards");l||(l=[]),l.push(o.id),p.a.setDocumentSettingForKey(n,"stark-landmarks-artboards",l)}a.moveToBack(),p.a.setLayerSettingForKey(a,"stark-landmark-item",{type:e,layerId:a.id,layerName:r.layers[0].name}),t={artboardId:o.id,artboardName:o.name,type:e,layerId:a.id,layerName:r.layers[0].name}}return t}(JSON.parse(e).landmarkType);if(t&&t.artboardId){var n=Ae.landmarkArtboards.find((function(e){return e.artboardId===t.artboardId}));n?n.landmarks.push({type:t.type,layerId:t.layerId,layerName:t.layerName}):Ae.landmarkArtboards.push({artboardId:t.artboardId,artboardName:t.artboardName,landmarks:[{type:t.type,layerId:t.layerId,layerName:t.layerName}]})}i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("deleteLandmarkItem",(function(e){var t=JSON.parse(e).layerId;!function(e){var t=s.a.getSelectedDocument(),n=t.getLayerWithID(e),r=n.parent,a=r.layers.length;if(1===a){var o=p.a.documentSettingForKey(t,"stark-landmarks-artboards"),i=o.findIndex((function(e){return e===r.id}));o.splice(i,1),p.a.setDocumentSettingForKey(t,"stark-landmarks-artboards",o)}n.remove(),1===a&&r.remove()}(t),Ae.landmarkArtboards.forEach((function(e){var n=e.landmarks.findIndex((function(e){return e.layerId===t}));n>-1&&e.landmarks.splice(n,1)}));var n=Ae.landmarkArtboards.findIndex((function(e){return e.landmarks.length<1}));n>-1&&Ae.landmarkArtboards.splice(n,1),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("simulationDialogMounted",(function(){var e=s.a.getSelectedDocument(),t=le(e)||Ae.artboardNames[0].id,n=e.getLayerWithID(t),r=ue(n);Ae.sizeData=de(n),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"', '").concat(r,"')")).catch(console.error)})),i.on("artboardChanged",(function(e){var t=s.a.getSelectedDocument(),n=JSON.parse(e),r=t.getLayerWithID(n.artboardToSim),a=ue(r);Ae.artboardNames.forEach((function(e){return e.isSelected=n.artboardToSim===e.id})),Ae.sizeData=de(r),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"', '").concat(a,"')")).catch(console.error)})),i.on("generate",(function(e){var t=JSON.parse(e);!function(e,t){var n=e.name,r=e.frame.x,a=[];t.forEach((function(t){var i=e.duplicate();i.name="".concat(n," - ").concat(t);var s=r+i.frame.width+100;if(i.frame.x=s,r=s,a.push(i),t===o.BLURRED)$(i,!0).forEach((function(e){e.style.blur={type:ie.BlurType.Gaussian,radius:1.75,enabled:!0}}));else{var c=Object(o.GetColorblindMatrixArray)(t);if(i.background&&i.background.color){var l=se(i.background.color,c);oe(l,i)}$(i,!0).forEach((function(e){if(("Shape"===e.type||"ShapePath"===e.type||"Image"===e.type||"Text"===e.type)&&(ce(e.style.fills,c),ce(e.style.borders,c),"Text"===e.type)){var t=e.sketchObject.textColor(),n={r:255*t.red(),g:255*t.green(),b:255*t.blue(),a:t.alpha()},r=Object(o.ConvertRgbaStringToRgba)(se(Object(o.ConvertRgbaToHex)(n),c));oe(Object(o.ConvertRgbaToHex)(r,!0,!0),e)}}))}})),s.a.getSelectedDocument().centerOnLayer(a[0]),O("".concat(t.length," Simulated artboard").concat(t.length>1?"s":""," generated."))}(s.a.getSelectedDocument().getLayerWithID(t.artboardToGenerate),t.visionSimulatorTypesSelected),i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("defaultToolChanged",(function(e){var t=JSON.parse(e);L("stark_default_tool",t.tool),Ae.defaultSelectedMenuItem=D(t.tool),Ae.defaultTool=t.tool,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("defaultColorFormatChanged",(function(e){var t=JSON.parse(e);L("stark_default_color_format",t.colorFormat),Ae.defaultColorFormat=t.colorFormat,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("validationSuccessful",(function(e){E(e),De=_(),Ae.subscription=De,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("validationFailed",(function(){I(),De=_(),Ae.subscription=De,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("signoutButtonClicked",(function(){I(),De=_(),Ae.subscription=De,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),i.on("activateButtonClicked",(function(e){!function(e){L(v,e.id),L(b,e.email),L(T,e.mp_id),L(k,e.optInUsageData),L(S,e.status),L(w,e.plan),L(C,e.teamUser),L(x,e.teamPlanStatus)}(e),e=_(),Ae.subscription=e,i.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error)})),r.loadURL(n(36))};var Pe=function(e){switch(e){case"Main":r.setTitle("Main"),Je(360,473);break;case"Check Contrast":var t=s.a.getSelectedDocument().selectedLayers.layers,n=ae();if(Ae.colorGroups=n,0===t.length)Ae.showErrorState=!0;else{var a=te();Ae.contrastRatio=Object(o.GetContrastRatio)(a.normalizedBgColor,a.normalizedFgColor,!0),Ae.backgroundColor=a.originalBgColor,Ae.foregroundColor=a.originalFgColor,Ae.showErrorState=!1,Ie=a.backgroundLayer,Ee=a.foregroundLayer}r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Check Contrast"),Je(360,651);break;case"Alt-Text":try{var i=function(){var e=s.a.getSelectedDocument();return p.a.documentSettingForKey(e,"stark-alt-text-artboards")||[]}();if(i&&i.length>0){var c=function(e){var t=s.a.getSelectedDocument(),n=[],r=[];return e.forEach((function(e,a){var o=t.getLayerWithID(e);if(o){var i=p.a.layerSettingForKey(o,"stark-alt-text-main-group");if(i){var s=t.getLayerWithID(i);if(s){var c=s.getParentArtboard(),l={artboardName:c.name,artboardId:c.id,altTexts:[]},u=[];s.layers.forEach((function(e,t){var n=p.a.layerSettingForKey(e,"stark-alt-text-item");n&&u.push({layerId:n.layerId,name:n.name,status:n.status,text:n.text})})),u.reverse(),l.altTexts=u,n.push(l)}else r.push(a)}}})),r.forEach((function(t){e.splice(t,1)})),p.a.setDocumentSettingForKey(t,"stark-alt-text-artboards",e),n}(i);Ae.altTextArtboards=c}r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Alt-Text"),Je(360,561)}catch(e){A(e)}break;case"Typography":var l=s.a.getSelectedDocument().selectedPage,u=[];g.a.find("Text",l).forEach((function(e){e.style.fontSize<12&&u.push({name:e.name,size:Math.trunc(e.style.fontSize),fontName:e.style.fontFamily,fontWeight:e.style.fontWeight,layerId:e.id})})),Ae.typographyItems=u,r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Typography"),Je(360,561);break;case"Touch Targets":var d=s.a.getSelectedDocument().selectedLayers;d.isEmpty?(Ae.touchTargetDimensions={width:0,height:0},O("Select a layer to check touch targets.")):1===d.length?Ae.touchTargetDimensions={width:Math.trunc(d.layers[0].frame.width),height:Math.trunc(d.layers[0].frame.height)}:(Ae.touchTargetDimensions={width:0,height:0},O("Too many layers to check touch targets against.")),r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Touch Targets"),Je(360,347);break;case"Focus Order":var f=function(){var e=s.a.getSelectedDocument();return p.a.documentSettingForKey(e,"stark-fo-main-groups")||[]}();if(f&&f.length>0){var h=function(e){var t=s.a.getSelectedDocument(),n=[],r=[];return e.forEach((function(e,a){var o=t.getLayerWithID(e);if(o){var i=p.a.layerSettingForKey(o,"stark-fo-sequences"),s=[];i&&(i.forEach((function(e,r){e&&t.getLayerWithID(e.id)?n.push({id:e.id,name:e.name}):s.push(r)})),s.forEach((function(e){i.splice(e,1)})),p.a.setLayerSettingForKey(o,"stark-fo-sequences",i))}else r.push(a)})),r.forEach((function(t){e.splice(t,1)})),p.a.setDocumentSettingForKey(t,"stark-fo-main-groups",e),n}(f);Ae.sequences=h}r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Focus Order"),Je(360,602);break;case"Landmarks":var m=function(){var e=s.a.getSelectedDocument();return p.a.documentSettingForKey(e,"stark-landmarks-artboards")||[]}();if(m&&m.length>0){var y=function(e){var t=s.a.getSelectedDocument(),n=[],r=[];return e.forEach((function(e,a){var o=t.getLayerWithID(e);if(o){var i=p.a.layerSettingForKey(o,"stark-landmark-main-group");if(i){var s=t.getLayerWithID(i);if(s){var c=s.getParentArtboard(),l={artboardName:c.name,artboardId:c.id,landmarks:[]},u=[];s.layers.forEach((function(e,t){var n=p.a.layerSettingForKey(e,"stark-landmark-item");n&&u.push({type:n.type,layerId:n.layerId,layerName:n.layerName})})),u.reverse(),l.landmarks=u,n.push(l)}else r.push(a)}}})),r.forEach((function(t){e.splice(t,1)})),p.a.setDocumentSettingForKey(t,"stark-landmarks-artboards",e),n}(m);Ae.landmarkArtboards=y}r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Landmarks"),Je(360,586);break;case"Vision Simulator":var v=s.a.getSelectedDocument(),S=function(e){var t=e.selectedPage,n=le(e),r=[],a=/'/g;return t.layers.forEach((function(e){("Artboard"===e.type||"SymbolMaster"===e.type)&&r.push({id:e.id,name:e.name.replace(a,""),isSelected:n==e.id})})),r.reverse()}(v),b=le(v);if(S.length<=0)return void O("You need at least one artboard to run the vision simulator.");if(!b&&v.selectedLayers.layers.length>0)return void O("The vision simulator can only be run on artboards.");b||(S[0].isSelected=!0),Ae.artboardNames=S,r.webContents.executeJavaScript("prepareFirstLoad('Main', '".concat(JSON.stringify(Ae),"')")).catch(console.error),r.setTitle("Vision Simulator"),Je(448,621);break;case"Settings":r.setTitle("Settings"),Je(360,490);break;case"Account":r.setTitle("Account"),Je(360,490);break;default:r.setTitle("Main"),Je(360,304)}},Je=function(e,t){var n=r.getBounds();n.height>t?r.setBounds({y:n.y-(n.height-t),height:t,width:e}):n.height<t?r.setBounds({y:n.y+(t-n.height),height:t,width:e}):r.setBounds({height:t,width:e})}}]);"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.onRun=__skpm_run.bind(this,"default"),that.onSelectionChanged=__skpm_run.bind(this,"onSelectionChanged");